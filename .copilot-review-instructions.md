# GitHub Copilot ç¨‹å¼ç¢¼å¯©æŸ¥æŒ‡å¼•

> æœ¬æª”æ¡ˆå®šç¾© GitHub Copilot é€²è¡Œç¨‹å¼ç¢¼å¯©æŸ¥æ™‚çš„æ¨™æº–å’Œæª¢æŸ¥é …ç›®ã€‚

## ğŸ¯ å¯©æŸ¥ç›®æ¨™

ç¨‹å¼ç¢¼å¯©æŸ¥æ‡‰ç¢ºä¿ï¼š
1. ç¬¦åˆå°ˆæ¡ˆé–‹ç™¼æ¨™æº–å’Œæ¶æ§‹åŸå‰‡
2. ç¶­æŒç¨‹å¼ç¢¼å“è³ªå’Œå¯ç¶­è­·æ€§
3. éµå¾ªå®‰å…¨æ€§å’Œæ•ˆèƒ½æœ€ä½³å¯¦è¸
4. æ–‡ä»¶èˆ‡ç¨‹å¼ç¢¼ä¿æŒåŒæ­¥

## ğŸ“‹ å¯©æŸ¥æª¢æŸ¥æ¸…å–®

### 1. æ¶æ§‹èˆ‡è¨­è¨ˆ â­

#### åˆ†å±¤æ¶æ§‹
- [ ] éµå®ˆ `routes â†’ shared â†’ core` ä¾è³´æ–¹å‘
- [ ] æ²’æœ‰å¾ªç’°ä¾è³´
- [ ] è·¯å¾‘åˆ¥åä½¿ç”¨æ­£ç¢ºï¼ˆ`@core`ã€`@shared`ã€`@env`ï¼‰
- [ ] æ²’æœ‰æ·±å±¤è·¯å¾‘åˆ¥å

#### æ¨¡çµ„åŒ–
- [ ] ä½¿ç”¨ Standalone Components
- [ ] ä½¿ç”¨ `SHARED_IMPORTS` åŒ¯å…¥å…±ç”¨å…ƒä»¶
- [ ] æ²’æœ‰ NgModule å®šç¾©

### 2. TypeScript å‹åˆ¥å®‰å…¨ â­â­â­

#### å‹åˆ¥å®šç¾©
- [ ] ç„¡ `any` å‹åˆ¥ï¼ˆé™¤éæœ‰æ˜ç¢ºè¨»è§£èªªæ˜åŸå› ï¼‰
- [ ] å‡½å¼æœ‰æ˜ç¢ºçš„åƒæ•¸å’Œå›å‚³å‹åˆ¥
- [ ] ä»‹é¢å’Œå‹åˆ¥å®šç¾©å®Œæ•´
- [ ] ä½¿ç”¨ `satisfies` è€Œé `as` å‹åˆ¥æ–·è¨€

#### è³‡æ–™æ¨¡å‹
- [ ] å‹åˆ¥èˆ‡ `docs/30-0-å®Œæ•´SQLè¡¨çµæ§‹å®šç¾©.md` ä¸€è‡´
- [ ] ä½¿ç”¨ `readonly` ä¿è­·ä¸å¯è®Šè³‡æ–™
- [ ] æ³›å‹ä½¿ç”¨å¾—ç•¶

```typescript
// âœ… æ­£ç¢º
interface User {
  readonly id: string;
  readonly name: string;
  readonly email: string;
}

function getUser(id: string): Promise<User> {
  // ...
}

// âŒ éŒ¯èª¤
function getUser(id: any): Promise<any> {
  // ...
}
```

### 3. Angular ç¾ä»£åŒ–èªæ³• â­â­

#### Signals API
- [ ] ç‹€æ…‹ä½¿ç”¨ `signal()` ç®¡ç†
- [ ] è¼¸å…¥ä½¿ç”¨ `input()` / `input.required()`
- [ ] è¼¸å‡ºä½¿ç”¨ `output()`
- [ ] æŸ¥è©¢ä½¿ç”¨ `viewChild()` / `contentChild()`
- [ ] é¿å…ä½¿ç”¨ `@Input()` / `@Output()` è£é£¾å™¨

```typescript
// âœ… æ­£ç¢ºï¼šä½¿ç”¨ Signals
readonly title = input.required<string>();
readonly count = input<number>(0);
readonly clicked = output<void>();

// âŒ éŒ¯èª¤ï¼šä½¿ç”¨è£é£¾å™¨
@Input() title!: string;
@Output() clicked = new EventEmitter<void>();
```

#### æ¨¡æ¿èªæ³•
- [ ] ä½¿ç”¨ `@if` è€Œé `*ngIf`
- [ ] ä½¿ç”¨ `@for` æ­é… `track` è€Œé `*ngFor`
- [ ] ä½¿ç”¨ `@switch` è€Œé `[ngSwitch]`
- [ ] é©ç•¶ä½¿ç”¨ `@defer` å»¶é²è¼‰å…¥

```html
<!-- âœ… æ­£ç¢º -->
@if (isLoading()) {
  <nz-spin />
} @else {
  @for (item of items(); track item.id) {
    <div>{{ item.name }}</div>
  }
}

<!-- âŒ éŒ¯èª¤ -->
<div *ngIf="isLoading">
  <nz-spin />
</div>
<div *ngFor="let item of items">
  {{ item.name }}
</div>
```

#### è®Šæ›´åµæ¸¬
- [ ] ä½¿ç”¨ `ChangeDetectionStrategy.OnPush`
- [ ] é¿å…åœ¨æ¨¡æ¿ä¸­å‘¼å«å‡½å¼
- [ ] åˆ—è¡¨ä½¿ç”¨ `trackBy` æˆ– `track`

### 4. ç¨‹å¼ç¢¼å“è³ª

#### å‘½åè¦ç¯„
- [ ] è®Šæ•¸åç¨±æ¸…æ¥šè¡¨é”ç”¨é€”
- [ ] å‡½å¼åç¨±ä½¿ç”¨å‹•è©é–‹é ­
- [ ] å¸¸æ•¸ä½¿ç”¨ UPPER_SNAKE_CASE
- [ ] ä»‹é¢ä½¿ç”¨ PascalCase

#### ç¨‹å¼ç¢¼çµæ§‹
- [ ] å‡½å¼é•·åº¦åˆç†ï¼ˆ< 50 è¡Œï¼‰
- [ ] å–®ä¸€è·è²¬åŸå‰‡
- [ ] é¿å…é‡è¤‡ç¨‹å¼ç¢¼ï¼ˆDRYï¼‰
- [ ] é©ç•¶çš„è¨»è§£å’Œ JSDoc

```typescript
// âœ… æ­£ç¢ºï¼šæ¸…æ¥šçš„å‘½åå’Œçµæ§‹
/**
 * è¼‰å…¥ä½¿ç”¨è€…åˆ—è¡¨
 * @returns ä½¿ç”¨è€…é™£åˆ—
 */
async loadUsers(): Promise<User[]> {
  this.isLoading.set(true);
  try {
    const users = await this.userService.getAll();
    this.users.set(users);
    return users;
  } catch (error) {
    this.handleError(error);
    return [];
  } finally {
    this.isLoading.set(false);
  }
}

// âŒ éŒ¯èª¤ï¼šå‘½åä¸æ¸…ã€ç¼ºå°‘éŒ¯èª¤è™•ç†
async load() {
  const data = await this.svc.get();
  this.d = data;
}
```

### 5. éŒ¯èª¤è™•ç† â­

#### éŒ¯èª¤è™•ç†ç­–ç•¥
- [ ] æ‰€æœ‰ async/await æœ‰ try-catch
- [ ] éŒ¯èª¤è¨Šæ¯å°ä½¿ç”¨è€…å‹å–„
- [ ] ä½¿ç”¨ `NzMessageService` é¡¯ç¤ºéŒ¯èª¤
- [ ] è¨˜éŒ„è©³ç´°éŒ¯èª¤è³‡è¨Šä¾›é™¤éŒ¯

```typescript
// âœ… æ­£ç¢º
try {
  await this.saveData(data);
  this.message.success('å„²å­˜æˆåŠŸ');
} catch (error) {
  console.error('å„²å­˜è³‡æ–™å¤±æ•—:', error);
  this.message.error('å„²å­˜å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
}

// âŒ éŒ¯èª¤ï¼šæ²’æœ‰éŒ¯èª¤è™•ç†
await this.saveData(data);
this.message.success('å„²å­˜æˆåŠŸ');
```

### 6. å®‰å…¨æ€§ â­â­â­

#### èªè­‰èˆ‡æˆæ¬Š
- [ ] ä½¿ç”¨ `@delon/auth` çš„ `TokenService` ç®¡ç† JWT
- [ ] æª¢æŸ¥ä½¿ç”¨è€…æ¬Šé™å¾Œæ‰åŸ·è¡Œæ•æ„Ÿæ“ä½œ
- [ ] é¿å…åœ¨å‰ç«¯ç¡¬ç·¨ç¢¼è§’è‰²æˆ–æ¬Šé™

#### è³‡æ–™å®‰å…¨
- [ ] éµå®ˆ Supabase RLS æ”¿ç­–
- [ ] ä¸åœ¨ç¨‹å¼ç¢¼ä¸­ç¡¬ç·¨ç¢¼æ©Ÿå¯†è³‡è¨Š
- [ ] ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ç®¡ç†è¨­å®š
- [ ] é©—è­‰ä½¿ç”¨è€…è¼¸å…¥

```typescript
// âœ… æ­£ç¢ºï¼šæª¢æŸ¥æ¬Šé™
if (await this.authService.hasPermission('edit')) {
  await this.updateData(data);
}

// âŒ éŒ¯èª¤ï¼šç›´æ¥æ“ä½œ
await this.updateData(data);
```

### 7. æ•ˆèƒ½è€ƒé‡

#### æ•ˆèƒ½æœ€ä½³åŒ–
- [ ] é¿å…ä¸å¿…è¦çš„ re-render
- [ ] ä½¿ç”¨ `@defer` å»¶é²è¼‰å…¥
- [ ] é©ç•¶ä½¿ç”¨ `computed()` å¿«å–è¨ˆç®—çµæœ
- [ ] å¤§å‹åˆ—è¡¨ä½¿ç”¨è™›æ“¬æ»¾å‹•

```typescript
// âœ… æ­£ç¢ºï¼šä½¿ç”¨ computed å¿«å–
readonly totalPrice = computed(() => 
  this.items().reduce((sum, item) => sum + item.price, 0)
);

// âŒ éŒ¯èª¤ï¼šåœ¨ getter ä¸­è¨ˆç®—
get totalPrice() {
  return this.items.reduce((sum, item) => sum + item.price, 0);
}
```

### 8. æ¸¬è©¦è¦†è“‹

#### æ¸¬è©¦è¦æ±‚
- [ ] æ–°åŠŸèƒ½æœ‰å°æ‡‰çš„å–®å…ƒæ¸¬è©¦
- [ ] æ¸¬è©¦è¦†è“‹ç‡ â‰¥ 80%
- [ ] é—œéµè·¯å¾‘æœ‰æ•´åˆæ¸¬è©¦
- [ ] æ¸¬è©¦æ¡ˆä¾‹æ¸…æ¥šæè¿°é æœŸè¡Œç‚º

```typescript
// âœ… æ­£ç¢ºï¼šå®Œæ•´çš„æ¸¬è©¦
describe('UserService', () => {
  it('should load users successfully', async () => {
    const mockUsers = [{ id: '1', name: 'Test' }];
    service.loadUsers();
    await fixture.whenStable();
    expect(service.users()).toEqual(mockUsers);
  });
  
  it('should handle load error', async () => {
    spyOn(console, 'error');
    // æ¨¡æ“¬éŒ¯èª¤...
    expect(console.error).toHaveBeenCalled();
  });
});
```

### 9. æ–‡ä»¶åŒæ­¥

#### æ–‡ä»¶æ›´æ–°
- [ ] README åæ˜ æœ€æ–°åŠŸèƒ½
- [ ] API æ–‡ä»¶èˆ‡å¯¦ä½œä¸€è‡´
- [ ] è®Šæ›´è¨˜éŒ„åœ¨ CHANGELOG
- [ ] JSDoc å®Œæ•´ä¸”æº–ç¢º

### 10. æ¨£å¼èˆ‡æ ¼å¼

#### ç¨‹å¼ç¢¼æ ¼å¼
- [ ] é€šé `yarn lint` æª¢æŸ¥
- [ ] é€šé `yarn lint:style` æª¢æŸ¥
- [ ] é€šé `yarn type-check` æª¢æŸ¥
- [ ] ç¬¦åˆ Prettier æ ¼å¼è¦ç¯„

## ğŸ” å¯©æŸ¥æµç¨‹

### 1. è‡ªå‹•æª¢æŸ¥
```bash
# åŸ·è¡Œæ‰€æœ‰æª¢æŸ¥
yarn lint                  # ESLint
yarn lint:style           # Stylelint
yarn type-check           # TypeScript
yarn test --watch=false   # å–®å…ƒæ¸¬è©¦
yarn build                # å»ºç½®
```

### 2. æ‰‹å‹•å¯©æŸ¥é‡é»
- æ¶æ§‹è¨­è¨ˆæ˜¯å¦åˆç†
- æ˜¯å¦æœ‰æ½›åœ¨çš„æ•ˆèƒ½å•é¡Œ
- å®‰å…¨æ€§è€ƒé‡æ˜¯å¦å®Œæ•´
- ä½¿ç”¨è€…é«”é©—æ˜¯å¦å‹å–„

### 3. æä¾›å»ºè­°æ ¼å¼

```markdown
## ğŸ” å¯©æŸ¥çµæœ

### âœ… å„ªé»
- æ­£ç¢ºä½¿ç”¨ Signals API
- éŒ¯èª¤è™•ç†å®Œå–„
- æ¸¬è©¦è¦†è“‹ç‡è‰¯å¥½

### âš ï¸ éœ€è¦æ”¹é€²
1. **å‹åˆ¥å®‰å…¨** (Line 45)
   - å•é¡Œï¼šä½¿ç”¨ `any` å‹åˆ¥
   - å»ºè­°ï¼šå®šç¾©æ˜ç¢ºçš„ä»‹é¢
   - ç¯„ä¾‹ï¼š`interface UserData { id: string; name: string; }`

2. **æ•ˆèƒ½å„ªåŒ–** (Line 78)
   - å•é¡Œï¼šåœ¨æ¨¡æ¿ä¸­å‘¼å«å‡½å¼
   - å»ºè­°ï¼šä½¿ç”¨ `computed()` å¿«å–çµæœ
   - é¢¨éšªï¼šæ¯æ¬¡è®Šæ›´åµæ¸¬éƒ½æœƒé‡æ–°è¨ˆç®—

### ğŸ“ å…¶ä»–å»ºè­°
- è€ƒæ…®åŠ å…¥è¼‰å…¥ç‹€æ…‹æŒ‡ç¤ºå™¨
- å»ºè­°å¢åŠ éŒ¯èª¤é‚Šç•Œè™•ç†
```

## ğŸ“š åƒè€ƒè³‡æ–™

- `.copilot-instructions.md` - é–‹ç™¼æŒ‡å¼•
- `docs/00-é–‹ç™¼ä½œæ¥­æŒ‡å¼•.md` - é–‹ç™¼è¦ç¯„
- `.cursor/rules/code-quality.mdc` - ç¨‹å¼ç¢¼å“è³ªè¦ç¯„
- `.cursor/rules/security.mdc` - å®‰å…¨è¦ç¯„
- `.cursor/rules/testing.mdc` - æ¸¬è©¦è¦ç¯„

---

**ç‰ˆæœ¬**ï¼šv2.0  
**æœ€å¾Œæ›´æ–°**ï¼š2025-11-18  
**ç¶­è­·è€…**ï¼šé–‹ç™¼åœ˜éšŠ
