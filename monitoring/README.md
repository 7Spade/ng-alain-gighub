# ç›£æ§åŸºç¤è¨­æ–½

> ğŸ“Š **ç›®çš„**ï¼šæä¾›å®Œæ•´çš„ç³»çµ±ç›£æ§ã€å‘Šè­¦å’Œå¯è§€æ¸¬æ€§åŸºç¤è¨­æ–½

é€™å€‹ç›®éŒ„åŒ…å«æ‰€æœ‰ç›£æ§ç›¸é—œçš„é…ç½®å’Œè…³æœ¬ã€‚

---

## ğŸ“ ç›®éŒ„çµæ§‹

```
monitoring/
â”œâ”€â”€ prometheus/          # Prometheus é…ç½®
â”‚   â””â”€â”€ prometheus.yml  # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ grafana/            # Grafana é…ç½®
â”‚   â””â”€â”€ dashboards/     # é è¨­å„€è¡¨æ¿
â”œâ”€â”€ alerts/             # å‘Šè­¦è¦å‰‡
â”‚   â””â”€â”€ alert-rules.yml # å‘Šè­¦è¦å‰‡é…ç½®
â”œâ”€â”€ loki/               # Loki æ—¥èªŒèšåˆé…ç½®
â”œâ”€â”€ docker-compose.yml  # Docker Compose é…ç½®ï¼ˆå¾…å»ºç«‹ï¼‰
â””â”€â”€ README.md           # æœ¬æ–‡ä»¶
```

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### æœ¬åœ°é–‹ç™¼

1. å•Ÿå‹•ç›£æ§å †ç–Šï¼š
```bash
docker-compose up -d
```

2. è¨ªå•ç›£æ§ä»‹é¢ï¼š
   - Prometheus: http://localhost:9090
   - Grafana: http://localhost:3000
   - Alertmanager: http://localhost:9093

### ç”Ÿç”¢ç’°å¢ƒ

åƒè€ƒ [MONITORING.md](../docs/infrastructure/MONITORING.md) å®Œæ•´æ–‡æª”ã€‚

---

## ğŸ“Š ç›£æ§æŒ‡æ¨™

### ç³»çµ±æŒ‡æ¨™
- CPU ä½¿ç”¨ç‡
- è¨˜æ†¶é«”ä½¿ç”¨ç‡
- ç£ç¢Ÿä½¿ç”¨ç‡
- ç¶²è·¯æµé‡

### è³‡æ–™åº«æŒ‡æ¨™
- é€£ç·šæ•¸
- æŸ¥è©¢æ€§èƒ½
- ç·©å­˜æ•ˆç‡
- æ…¢æŸ¥è©¢

### æ‡‰ç”¨ç¨‹å¼æŒ‡æ¨™
- è«‹æ±‚ç‡
- éŒ¯èª¤ç‡
- å›æ‡‰æ™‚é–“
- API æ€§èƒ½

### Core Web Vitals
- LCP (Largest Contentful Paint)
- FID/INP (First Input Delay / Interaction to Next Paint)
- CLS (Cumulative Layout Shift)

### æ¥­å‹™æŒ‡æ¨™
- æ´»èºç”¨æˆ¶æ•¸
- ä»»å‹™åŸ·è¡Œçµ±è¨ˆ
- å•é¡Œè¿½è¹¤çµ±è¨ˆ
- ç³»çµ±ä½¿ç”¨ç‡

---

## ğŸ”” å‘Šè­¦é…ç½®

å‘Šè­¦è¦å‰‡å®šç¾©åœ¨ `alerts/alert-rules.yml`ï¼ŒåŒ…å«ï¼š

### ç³»çµ±å‘Šè­¦
- é«˜ CPU ä½¿ç”¨ç‡ (> 80%)
- é«˜è¨˜æ†¶é«”ä½¿ç”¨ç‡ (> 85%)
- ç£ç¢Ÿç©ºé–“ä¸è¶³ (> 75%)

### è³‡æ–™åº«å‘Šè­¦
- PostgreSQL åœæ©Ÿ
- é«˜é€£ç·šæ•¸ (> 80%)
- æ…¢æŸ¥è©¢ (> 1s)

### æ‡‰ç”¨ç¨‹å¼å‘Šè­¦
- é«˜éŒ¯èª¤ç‡ (> 1%)
- API å›æ‡‰æ…¢ (> 2s)
- é«˜è«‹æ±‚ç‡

### Core Web Vitals å‘Šè­¦
- LCP > 2.5s
- FID/INP > 100ms
- CLS > 0.1

### æ¥­å‹™æŒ‡æ¨™å‘Šè­¦
- æ´»èºç”¨æˆ¶æ•¸ä½
- ä»»å‹™å¤±æ•—ç‡é«˜

---

## ğŸ“ˆ Grafana å„€è¡¨æ¿

é è¨­å„€è¡¨æ¿åŒ…å«ï¼š

1. **ç³»çµ±ç¸½è¦½** - ç³»çµ±è³‡æºç›£æ§
2. **è³‡æ–™åº«ç›£æ§** - PostgreSQL æ€§èƒ½
3. **æ‡‰ç”¨ç¨‹å¼ç›£æ§** - Angular æ‡‰ç”¨æ€§èƒ½
4. **Core Web Vitals** - ç”¨æˆ¶é«”é©—æŒ‡æ¨™
5. **æ¥­å‹™æŒ‡æ¨™** - æ¥­å‹™ç›¸é—œæŒ‡æ¨™

---

## ğŸ” æ—¥èªŒæŸ¥è©¢

ä½¿ç”¨ Loki æŸ¥è©¢æ—¥èªŒï¼š

```logql
# æŸ¥è©¢éŒ¯èª¤æ—¥èªŒ
{job="angular-app"} |= "ERROR"

# æŸ¥è©¢ç‰¹å®šæ™‚é–“ç¯„åœ
{job="edge-functions"} | json | level="error"

# èšåˆæŸ¥è©¢
sum(rate({job="angular-app"}[1m])) by (level)
```

---

## ğŸ“š åƒè€ƒæ–‡æª”

### å°ˆæ¡ˆæ–‡æª”
- [ç›£æ§è¨­ç½®æŒ‡å—](../docs/infrastructure/MONITORING.md) - å®Œæ•´ç›£æ§æ–‡æª”
- [éƒ¨ç½²åŸºç¤è¨­æ–½è¦–åœ–](../docs/20-éƒ¨ç½²åŸºç¤è¨­æ–½è¦–åœ–.mermaid.md) - æ¶æ§‹åœ–
- [å¯è§€æ¸¬æ€§èˆ‡ CI/CD ç®¡é“åœ–](../docs/23-å¯è§€æ¸¬æ€§èˆ‡CI-CDç®¡é“åœ–.mermaid.md) - æµç¨‹åœ–

### å®˜æ–¹æ–‡æª”
- [Prometheus](https://prometheus.io/docs/)
- [Grafana](https://grafana.com/docs/)
- [Loki](https://grafana.com/docs/loki/)
- [Alertmanager](https://prometheus.io/docs/alerting/latest/alertmanager/)

---

## ğŸ› ï¸ ç¶­è­·

### å®šæœŸæª¢æŸ¥
- æ¯é€±æª¢æŸ¥å‘Šè­¦ç‹€æ…‹
- æ¯æœˆå¯©æŸ¥å„€è¡¨æ¿
- æ¯å­£è©•ä¼°ç›£æ§æ¶æ§‹

### å„ªåŒ–å»ºè­°
- èª¿æ•´ scrape_interval ä»¥å¹³è¡¡ç²¾ç¢ºåº¦å’Œè³‡æºä½¿ç”¨
- ä½¿ç”¨ recording rules å„ªåŒ–å¸¸ç”¨æŸ¥è©¢
- å®šæœŸæ¸…ç†èˆŠæ—¥èªŒå’ŒæŒ‡æ¨™

---

**æœ€å¾Œæ›´æ–°**ï¼š2025-11-15  
**ç¶­è­·è€…**ï¼šDevOps åœ˜éšŠ  
**è¯çµ¡æ–¹å¼**ï¼šdevops@example.com
