# accounts æ¨¡å—è¯„ä¼°æŠ¥å‘Š

> **è¯„ä¼°æ—¥æœŸ**ï¼š2025-01-20  
> **è¯„ä¼°èŒƒå›´**ï¼š`src/app/routes/accounts/` ç›®å½•ä¸‹çš„æ‰€æœ‰æ¨¡å—  
> **è¯„ä¼°æ ‡å‡†**ï¼šåŸºäºèœå•æ•°æ®æ–‡ä»¶å’Œå®é™…åŠŸèƒ½éœ€æ±‚

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

**æ€»ä½“è¯„ä¼°**ï¼šâš ï¸ **éƒ¨åˆ†æ¨¡å—éœ€è¦ç§»é™¤æˆ–é‡æ„**

### éœ€è¦ç§»é™¤çš„æ¨¡å— âŒ
1. **`list`** - è´¦æˆ·åˆ—è¡¨ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼Œç³»ç»Ÿæ— ç®¡ç†å‘˜è§’è‰²ï¼‰
2. **`users`** - ç”¨æˆ·åˆ—è¡¨ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼Œèœå•ä¸­çš„"My Profile"åº”è¯¥æŒ‡å‘ä¸ªäººèµ„æ–™ï¼Œä¸æ˜¯ç”¨æˆ·åˆ—è¡¨ï¼‰
3. **`bots`** - æœºå™¨äººåˆ—è¡¨ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼Œç³»ç»Ÿæ— ç®¡ç†å‘˜è§’è‰²ï¼‰

### éœ€è¦ä¿ç•™ä½†é‡æ„çš„æ¨¡å— âš ï¸
1. **`detail`** - è´¦æˆ·è¯¦æƒ…ï¼ˆä¿ç•™ï¼Œä½†éœ€è¦ä¼˜åŒ–ï¼‰
2. **`form`** - è´¦æˆ·ç¼–è¾‘è¡¨å•ï¼ˆä¿ç•™ï¼Œä½†éœ€è¦ä¼˜åŒ–ï¼‰

### éœ€è¦ç§»åŠ¨çš„æ¨¡å— ğŸ”„
1. **`schedules`** - æ’ç­ç®¡ç†ï¼ˆåº”è¯¥ç§»åŠ¨åˆ°ç»„ç»‡ç®¡ç†æ¨¡å—ä¸‹ï¼‰

---

## ğŸ” è¯¦ç»†åˆ†æ

### 1. `list` - è´¦æˆ·åˆ—è¡¨ç»„ä»¶

**è·¯å¾„**ï¼š`/accounts/list`  
**è·¯ç”±**ï¼šé»˜è®¤é‡å®šå‘åˆ°è¿™é‡Œ  
**åŠŸèƒ½**ï¼šæ˜¾ç¤ºæ‰€æœ‰è´¦æˆ·ï¼ˆç”¨æˆ·ã€æœºå™¨äººã€ç»„ç»‡ï¼‰ï¼Œå¯ä»¥åˆ›å»ºã€æŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤

**é—®é¢˜**ï¼š
- âŒ **ç®¡ç†å‘˜åŠŸèƒ½**ï¼šæ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰è´¦æˆ·ï¼Œè¿™æ˜¯å…¸å‹çš„ç®¡ç†å‘˜åŠŸèƒ½
- âŒ **æ— ç®¡ç†å‘˜è§’è‰²**ï¼šç³»ç»Ÿæ²¡æœ‰ç®¡ç†å‘˜è§’è‰²ï¼Œæ™®é€šç”¨æˆ·ä¸åº”è¯¥çœ‹åˆ°æ‰€æœ‰è´¦æˆ·
- âŒ **èœå•ä¸­æ— å¯¹åº”é¡¹**ï¼šä¸‰ä¸ªèœå•æ–‡ä»¶ï¼ˆuser-data.jsonã€organization-data.jsonã€team-data.jsonï¼‰éƒ½æ²¡æœ‰æŒ‡å‘ `/accounts/list` çš„é“¾æ¥

**è¯„ä¼°ç»“æœ**ï¼šâŒ **åº”è¯¥ç§»é™¤**

**å»ºè®®**ï¼š
- ç§»é™¤ `list` ç»„ä»¶å’Œè·¯ç”±
- å°†é»˜è®¤é‡å®šå‘æ”¹ä¸º `/accounts/org`ï¼ˆç»„ç»‡ç®¡ç†ï¼‰

---

### 2. `users` - ç”¨æˆ·åˆ—è¡¨ç»„ä»¶

**è·¯å¾„**ï¼š`/accounts/users`  
**èœå•**ï¼š`user-data.json` ä¸­ "My Profile" é“¾æ¥åˆ° `/accounts/users`  
**åŠŸèƒ½**ï¼šæ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·è´¦æˆ·ï¼Œå¯ä»¥åˆ›å»ºã€æŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤

**é—®é¢˜**ï¼š
- âŒ **åŠŸèƒ½ä¸åŒ¹é…**ï¼šèœå•æ˜¾ç¤º"My Profile"ï¼ˆæˆ‘çš„èµ„æ–™ï¼‰ï¼Œä½†å®é™…æ˜¯ç”¨æˆ·åˆ—è¡¨ï¼ˆæ‰€æœ‰ç”¨æˆ·ï¼‰
- âŒ **ç®¡ç†å‘˜åŠŸèƒ½**ï¼šæ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·ï¼Œè¿™æ˜¯ç®¡ç†å‘˜åŠŸèƒ½
- âŒ **æ— ç®¡ç†å‘˜è§’è‰²**ï¼šç³»ç»Ÿæ²¡æœ‰ç®¡ç†å‘˜è§’è‰²

**è¯„ä¼°ç»“æœ**ï¼šâŒ **åº”è¯¥ç§»é™¤**

**å»ºè®®**ï¼š
- ç§»é™¤ `users` ç»„ä»¶å’Œè·¯ç”±
- å¦‚æœ"My Profile"éœ€è¦æ˜¾ç¤ºä¸ªäººèµ„æ–™ï¼Œåº”è¯¥åˆ›å»ºæ–°çš„ä¸ªäººèµ„æ–™ç»„ä»¶ï¼ˆä¸åœ¨ accounts ä¸‹ï¼‰

---

### 3. `bots` - æœºå™¨äººåˆ—è¡¨ç»„ä»¶

**è·¯å¾„**ï¼š`/accounts/bots`  
**åŠŸèƒ½**ï¼šæ˜¾ç¤ºæ‰€æœ‰æœºå™¨äººè´¦æˆ·ï¼Œå¯ä»¥åˆ›å»ºã€æŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤ã€é…ç½®

**é—®é¢˜**ï¼š
- âŒ **ç®¡ç†å‘˜åŠŸèƒ½**ï¼šæ˜¾ç¤ºæ‰€æœ‰æœºå™¨äººï¼Œè¿™æ˜¯ç®¡ç†å‘˜åŠŸèƒ½
- âŒ **æ— ç®¡ç†å‘˜è§’è‰²**ï¼šç³»ç»Ÿæ²¡æœ‰ç®¡ç†å‘˜è§’è‰²
- âŒ **èœå•ä¸­æ— å¯¹åº”é¡¹**ï¼šä¸‰ä¸ªèœå•æ–‡ä»¶éƒ½æ²¡æœ‰æŒ‡å‘ `/accounts/bots` çš„é“¾æ¥

**è¯„ä¼°ç»“æœ**ï¼šâŒ **åº”è¯¥ç§»é™¤**

**å»ºè®®**ï¼š
- ç§»é™¤ `bots` ç»„ä»¶å’Œè·¯ç”±
- å¦‚æœéœ€è¦åœ¨ç»„ç»‡ä¸Šä¸‹æ–‡ä¸­ç®¡ç†æœºå™¨äººï¼Œåº”è¯¥åœ¨ç»„ç»‡ç®¡ç†æ¨¡å—ä¸‹æ·»åŠ 

---

### 4. `detail` - è´¦æˆ·è¯¦æƒ…ç»„ä»¶

**è·¯å¾„**ï¼š`/accounts/:id`  
**åŠŸèƒ½**ï¼šæ˜¾ç¤ºè´¦æˆ·è¯¦æƒ…ï¼ŒåŒ…æ‹¬ï¼š
- åŸºæœ¬ä¿¡æ¯ï¼ˆæ‰€æœ‰è´¦æˆ·ç±»å‹ï¼‰
- ç»„ç»‡è´¦æˆ·ï¼šæˆå‘˜ç®¡ç†ã€å›¢é˜Ÿä¿¡æ¯ã€æ’ç­ä¿¡æ¯

**é—®é¢˜**ï¼š
- âš ï¸ **åŠŸèƒ½æ··åˆ**ï¼šåŒæ—¶å¤„ç†ç”¨æˆ·ã€æœºå™¨äººã€ç»„ç»‡ä¸‰ç§è´¦æˆ·ç±»å‹
- âš ï¸ **ç»„ç»‡åŠŸèƒ½è¿‡å¤š**ï¼šç»„ç»‡è´¦æˆ·çš„è¯¦æƒ…é¡µåŒ…å«å¤ªå¤šåŠŸèƒ½ï¼ˆæˆå‘˜ã€å›¢é˜Ÿã€æ’ç­ï¼‰

**è¯„ä¼°ç»“æœ**ï¼šâœ… **ä¿ç•™ï¼Œä½†éœ€è¦ä¼˜åŒ–**

**å»ºè®®**ï¼š
- ä¿ç•™ `detail` ç»„ä»¶ï¼Œä½†ç®€åŒ–åŠŸèƒ½
- ç»„ç»‡è´¦æˆ·çš„è¯¦æƒ…é¡µåªæ˜¾ç¤ºåŸºæœ¬ä¿¡æ¯
- æˆå‘˜ç®¡ç†ã€å›¢é˜Ÿç®¡ç†ç­‰åŠŸèƒ½åº”è¯¥é€šè¿‡ `/accounts/org/:id/members` ç­‰è·¯ç”±è®¿é—®
- æˆ–è€…æ ¹æ®è´¦æˆ·ç±»å‹æ˜¾ç¤ºä¸åŒçš„è¯¦æƒ…è§†å›¾

---

### 5. `form` - è´¦æˆ·ç¼–è¾‘è¡¨å•ç»„ä»¶

**è·¯å¾„**ï¼š`/accounts/:id/edit`  
**åŠŸèƒ½**ï¼šç¼–è¾‘è´¦æˆ·ä¿¡æ¯ï¼ˆåç§°ã€é‚®ç®±ã€çŠ¶æ€ç­‰ï¼‰

**é—®é¢˜**ï¼š
- âš ï¸ **æƒé™é—®é¢˜**ï¼šæ™®é€šç”¨æˆ·ä¸åº”è¯¥èƒ½å¤Ÿç¼–è¾‘æ‰€æœ‰è´¦æˆ·
- âš ï¸ **åŠŸèƒ½èŒƒå›´**ï¼šåº”è¯¥é™åˆ¶åªèƒ½ç¼–è¾‘è‡ªå·±çš„è´¦æˆ·æˆ–è‡ªå·±æ‹¥æœ‰çš„ç»„ç»‡

**è¯„ä¼°ç»“æœ**ï¼šâœ… **ä¿ç•™ï¼Œä½†éœ€è¦ä¼˜åŒ–**

**å»ºè®®**ï¼š
- ä¿ç•™ `form` ç»„ä»¶ï¼Œä½†æ·»åŠ æƒé™æ£€æŸ¥
- ç”¨æˆ·åªèƒ½ç¼–è¾‘è‡ªå·±çš„è´¦æˆ·
- ç»„ç»‡æ‹¥æœ‰è€…åªèƒ½ç¼–è¾‘è‡ªå·±æ‹¥æœ‰çš„ç»„ç»‡
- æ·»åŠ  RLS ç­–ç•¥éªŒè¯

---

### 6. `schedules` - æ’ç­ç®¡ç†ç»„ä»¶ âš ï¸

**è·¯å¾„**ï¼š`/accounts/schedules`  
**èœå•**ï¼š`user-data.json` ä¸­ "My Schedules" é“¾æ¥åˆ° `/accounts/schedules`  
**åŠŸèƒ½**ï¼šæ˜¾ç¤ºç»„ç»‡æ’ç­ï¼Œéœ€è¦é€‰æ‹©ç»„ç»‡

**é—®é¢˜**ï¼š
- âŒ **ä½ç½®é”™è¯¯**ï¼šæ’ç­æ˜¯ç»„ç»‡åŠŸèƒ½ï¼Œä¸åº”è¯¥æ”¾åœ¨ accounts ä¸‹
- âŒ **åŠŸèƒ½ä¸åŒ¹é…**ï¼šèœå•æ˜¾ç¤º"My Schedules"ï¼ˆæˆ‘çš„æ’ç­ï¼‰ï¼Œä½†å®é™…æ˜¯ç»„ç»‡æ’ç­ç®¡ç†
- âš ï¸ **åº”è¯¥æ”¾åœ¨ç»„ç»‡ç®¡ç†ä¸‹**ï¼šåº”è¯¥åœ¨ `/accounts/org/:id/schedules` æˆ–ç±»ä¼¼è·¯å¾„

**è¯„ä¼°ç»“æœ**ï¼šğŸ”„ **åº”è¯¥ç§»åŠ¨åˆ°ç»„ç»‡ç®¡ç†æ¨¡å—**

**å»ºè®®**ï¼š
- ç§»åŠ¨åˆ° `org` æ¨¡å—ä¸‹ï¼š`/accounts/org/:id/schedules`
- æˆ–è€…åˆ›å»ºç‹¬ç«‹çš„ schedules æ¨¡å—ï¼ˆå¦‚æœæ’ç­åŠŸèƒ½è¶³å¤Ÿå¤æ‚ï¼‰
- æ›´æ–°èœå•é“¾æ¥

---

## ğŸ“Š æ¨¡å—åˆ†ç±»

### ç®¡ç†å‘˜åŠŸèƒ½ï¼ˆåº”è¯¥ç§»é™¤ï¼‰âŒ

| æ¨¡å— | è·¯å¾„ | é—®é¢˜ | å»ºè®® |
|------|------|------|------|
| `list` | `/accounts/list` | æ˜¾ç¤ºæ‰€æœ‰è´¦æˆ·ï¼Œç®¡ç†å‘˜åŠŸèƒ½ | ç§»é™¤ |
| `users` | `/accounts/users` | æ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·ï¼Œç®¡ç†å‘˜åŠŸèƒ½ | ç§»é™¤ |
| `bots` | `/accounts/bots` | æ˜¾ç¤ºæ‰€æœ‰æœºå™¨äººï¼Œç®¡ç†å‘˜åŠŸèƒ½ | ç§»é™¤ |

### é€šç”¨åŠŸèƒ½ï¼ˆä¿ç•™ä½†ä¼˜åŒ–ï¼‰âœ…

| æ¨¡å— | è·¯å¾„ | é—®é¢˜ | å»ºè®® |
|------|------|------|------|
| `detail` | `/accounts/:id` | åŠŸèƒ½æ··åˆï¼Œç»„ç»‡åŠŸèƒ½è¿‡å¤š | ä¿ç•™ï¼Œç®€åŒ–åŠŸèƒ½ |
| `form` | `/accounts/:id/edit` | æƒé™é—®é¢˜ | ä¿ç•™ï¼Œæ·»åŠ æƒé™æ£€æŸ¥ |

### ä½ç½®é”™è¯¯ï¼ˆéœ€è¦ç§»åŠ¨ï¼‰ğŸ”„

| æ¨¡å— | å½“å‰è·¯å¾„ | å»ºè®®è·¯å¾„ | è¯´æ˜ |
|------|----------|----------|------|
| `schedules` | `/accounts/schedules` | `/accounts/org/:id/schedules` | æ’ç­æ˜¯ç»„ç»‡åŠŸèƒ½ |

---

## ğŸ”§ å®æ–½å»ºè®®

### æ­¥éª¤ 1ï¼šç§»é™¤ç®¡ç†å‘˜åŠŸèƒ½æ¨¡å—

1. **ç§»é™¤ `list` ç»„ä»¶**
   ```bash
   # åˆ é™¤æ–‡ä»¶
   rm -rf src/app/routes/accounts/list
   ```

2. **ç§»é™¤ `users` ç»„ä»¶**
   ```bash
   # åˆ é™¤æ–‡ä»¶
   rm -rf src/app/routes/accounts/users
   ```

3. **ç§»é™¤ `bots` ç»„ä»¶**
   ```bash
   # åˆ é™¤æ–‡ä»¶
   rm -rf src/app/routes/accounts/bots
   ```

4. **æ›´æ–°è·¯ç”±é…ç½®**
   ```typescript
   // src/app/routes/accounts/routes.ts
   export const routes: Routes = [
     { path: '', redirectTo: 'org', pathMatch: 'full' }, // æ”¹ä¸ºé‡å®šå‘åˆ° org
     // ç§»é™¤ list, users, bots è·¯ç”±
     { path: 'create/organization', component: CreateOrganizationComponent },
     { path: 'create/bot', component: CreateBotComponent },
     { path: 'org', loadChildren: () => import('./org/routes').then(m => m.routes) },
     { path: ':id', component: AccountDetailComponent },
     { path: ':id/edit', component: AccountFormComponent }
   ];
   ```

---

### æ­¥éª¤ 2ï¼šç§»åŠ¨ schedules æ¨¡å—

1. **ç§»åŠ¨åˆ° org æ¨¡å—ä¸‹**
   ```bash
   # ç§»åŠ¨æ–‡ä»¶
   mv src/app/routes/accounts/schedules src/app/routes/accounts/org/schedules
   ```

2. **æ›´æ–°è·¯ç”±é…ç½®**
   ```typescript
   // src/app/routes/accounts/org/routes.ts
   export const routes: Routes = [
     { path: '', component: OrgComponent },
     { path: ':id/members', component: OrgMembersComponent },
     { path: ':id/roles', component: OrgRoleManageComponent },
     { path: ':id/teams', component: OrgTeamsComponent },
     { path: ':id/schedules', component: ScheduleListComponent }, // æ–°å¢
     { path: 'teams/:id/members', component: OrgTeamMembersComponent }
   ];
   ```

3. **æ›´æ–°èœå•é“¾æ¥**
   ```json
   // user-data.json
   {
     "text": "My Schedules",
     "link": "/accounts/org/:id/schedules", // æ›´æ–°é“¾æ¥
     "i18n": "menu.personal.account.schedules"
   }
   ```

---

### æ­¥éª¤ 3ï¼šä¼˜åŒ– detail å’Œ form ç»„ä»¶

1. **ç®€åŒ– detail ç»„ä»¶**
   - ç§»é™¤ç»„ç»‡æˆå‘˜ç®¡ç†ï¼ˆåº”è¯¥é€šè¿‡ `/accounts/org/:id/members` è®¿é—®ï¼‰
   - ç§»é™¤å›¢é˜Ÿç®¡ç†ï¼ˆåº”è¯¥é€šè¿‡ `/accounts/org/:id/teams` è®¿é—®ï¼‰
   - ç§»é™¤æ’ç­ç®¡ç†ï¼ˆåº”è¯¥é€šè¿‡ `/accounts/org/:id/schedules` è®¿é—®ï¼‰
   - åªä¿ç•™åŸºæœ¬ä¿¡æ¯æ˜¾ç¤º

2. **æ·»åŠ æƒé™æ£€æŸ¥åˆ° form ç»„ä»¶**
   - æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™ç¼–è¾‘è¯¥è´¦æˆ·
   - ç”¨æˆ·åªèƒ½ç¼–è¾‘è‡ªå·±çš„è´¦æˆ·
   - ç»„ç»‡æ‹¥æœ‰è€…åªèƒ½ç¼–è¾‘è‡ªå·±æ‹¥æœ‰çš„ç»„ç»‡

---

## âœ… å®æ–½æ£€æŸ¥æ¸…å•

### ç§»é™¤é˜¶æ®µ

- [ ] ç§»é™¤ `list` ç»„ä»¶å’Œè·¯ç”±
- [ ] ç§»é™¤ `users` ç»„ä»¶å’Œè·¯ç”±
- [ ] ç§»é™¤ `bots` ç»„ä»¶å’Œè·¯ç”±
- [ ] æ›´æ–° `routes.ts`ï¼Œç§»é™¤ç›¸å…³è·¯ç”±
- [ ] æ›´æ–°é»˜è®¤é‡å®šå‘ä¸º `/accounts/org`

### ç§»åŠ¨é˜¶æ®µ

- [ ] ç§»åŠ¨ `schedules` åˆ° `org` æ¨¡å—ä¸‹
- [ ] æ›´æ–° `org/routes.ts`ï¼Œæ·»åŠ  schedules è·¯ç”±
- [ ] æ›´æ–°èœå•é“¾æ¥ï¼ˆuser-data.jsonï¼‰
- [ ] æ›´æ–°ç»„ä»¶ä¸­çš„è·¯ç”±å¼•ç”¨

### ä¼˜åŒ–é˜¶æ®µ

- [ ] ç®€åŒ– `detail` ç»„ä»¶ï¼Œç§»é™¤ç»„ç»‡ç®¡ç†åŠŸèƒ½
- [ ] æ·»åŠ æƒé™æ£€æŸ¥åˆ° `form` ç»„ä»¶
- [ ] æµ‹è¯•æ‰€æœ‰åŠŸèƒ½æ­£å¸¸

### éªŒè¯é˜¶æ®µ

- [ ] **ç±»å‹æ£€æŸ¥**ï¼š`yarn type-check` é€šè¿‡
- [ ] **ä»£ç æ£€æŸ¥**ï¼š`yarn lint` é€šè¿‡
- [ ] **æ„å»ºæ£€æŸ¥**ï¼š`yarn build` é€šè¿‡
- [ ] **è¿è¡Œæ—¶æ£€æŸ¥**ï¼šåŠŸèƒ½åœ¨æµè§ˆå™¨ä¸­æ­£å¸¸å·¥ä½œ

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [org æ¨¡å—ä»£ç åˆ†ææŠ¥å‘Š](./orgæ¨¡å—ä»£ç åˆ†ææŠ¥å‘Š-2025-01-20.md) - org æ¨¡å—é—®é¢˜åˆ†æ
- [org æ¨¡å—ä¸‰è§†è§’è®¾è®¡æ–¹æ¡ˆ](./orgæ¨¡å—ä¸‰è§†è§’è®¾è®¡æ–¹æ¡ˆ-2025-01-20.md) - ä¸‰è§†è§’è®¾è®¡æ–¹æ¡ˆ
- [èœå•æ•°æ®æ–‡ä»¶](../../src/assets/tmp/user-data.json) - ç”¨æˆ·èœå•é…ç½®
- [èœå•æ•°æ®æ–‡ä»¶](../../src/assets/tmp/organization-data.json) - ç»„ç»‡èœå•é…ç½®
- [èœå•æ•°æ®æ–‡ä»¶](../../src/assets/tmp/team-data.json) - å›¢é˜Ÿèœå•é…ç½®

---

**æœ€å¾Œæ›´æ–°**ï¼š2025-01-20  
**ç¶­è­·è€…**ï¼šé–‹ç™¼åœ˜éšŠ

