# 狀態圖同步清單

> 📋 **目的**：記錄 `14-狀態圖.mermaid.md` 更新後需要同步的文檔清單  
> **更新日期**：2025-01-15  
> **版本**：v2.0（補充 PR、協作、待辦狀態機）

---

## ✅ 已更新的文檔

### 1. `14-狀態圖.mermaid.md` ✅
- **狀態**：已完成
- **更新內容**：
  - ✅ 添加 Pull Request 狀態機（open → reviewing → approved/rejected → merged/closed）
  - ✅ 添加協作者邀請狀態機（pending → accepted/rejected/expired）
  - ✅ 添加協作者關係狀態機（pending → active → suspended/ended）
  - ✅ 添加待辦中心狀態機（pending → in_progress → staging → in_qa → in_inspection → completed）
  - ✅ 更新狀態機之間的關聯關係

---

## 🔴 必須同步的文檔（高優先級）

### 2. `36-狀態枚舉值定義.md` ✅ **已完成**
- **狀態**：✅ 已完成
- **更新內容**：
  - ✅ 添加 **Pull Request 狀態**章節
    - 狀態值：`open`, `reviewing`, `approved`, `rejected`, `merged`, `closed`
    - 狀態流轉圖
    - 資料庫定義（`pull_requests.status`）
    - TypeScript 類型定義
  - ✅ 添加 **協作者邀請狀態**章節
    - 狀態值：`pending`, `accepted`, `rejected`, `expired`
    - 狀態流轉圖
    - 資料庫定義（`collaboration_invitations.status`）
    - TypeScript 類型定義
  - ✅ 添加 **協作者關係狀態**章節
    - 狀態值：`pending`, `active`, `suspended`, `ended`
    - 狀態流轉圖
    - 資料庫定義（`organization_collaborations.status`）
    - TypeScript 類型定義
  - ✅ 添加 **待辦中心狀態**章節（完整定義）
    - 狀態值：`pending`, `in_progress`, `staging`, `in_qa`, `in_inspection`, `completed`, `cancelled`
    - 狀態流轉圖
    - 資料庫定義（`personal_todos.status`）
    - TypeScript 類型定義
    - 五種狀態分類說明
  - ✅ 更新所有狀態圖文檔引用為 `14-狀態圖.mermaid.md`
  - ✅ 更新 TypeScript 類型定義部分
- **原因**：這是狀態定義的單一真實來源（Single Source of Truth），必須包含所有狀態定義

---

## 🟡 建議同步的文檔（中優先級）

### 3. `04-業務流程圖.mermaid.md` 🟡 **建議檢查**
- **狀態**：✅ 已對齊（流程圖中已有 PR、協作邀請、待辦中心流程）
- **檢查項目**：
  - ✅ PR 流程已包含（PRSubmit → PRReview → PRDecision → PRMerge/PRReject/PRRevise）
  - ✅ 協作邀請流程已包含（InviteCollab → CollabAccept）
  - ✅ 待辦中心流程已包含（TodoCenter）
- **建議**：確認狀態描述與狀態圖一致

### 4. `15-領域事件時間軸圖.mermaid.md` 🟡 **建議檢查**
- **狀態**：✅ 已對齊（已有 PR 和協作相關事件）
- **檢查項目**：
  - ✅ PR 提交事件（`branch.pull_request_submitted`）
  - ✅ PR 審查事件（`branch.pull_request_reviewed`）
  - ✅ PR 合併事件（`branch.merged`）
  - ✅ 協作邀請事件（`branch.invitation_sent`）
  - ⏳ 待辦中心事件（需確認是否有相關事件）
- **建議**：確認事件描述與狀態圖一致

### 5. `01-系統架構思維導圖.mermaid.md` 🟡 **建議檢查**
- **狀態**：⏳ 待檢查
- **檢查項目**：
  - ⏳ 是否包含 PR 狀態相關架構說明
  - ⏳ 是否包含協作邀請狀態相關架構說明
  - ⏳ 是否包含協作者關係狀態相關架構說明
  - ⏳ 是否包含待辦中心狀態相關架構說明
- **建議**：如果架構思維導圖包含狀態相關內容，需要同步更新

---

## 🟢 可選同步的文檔（低優先級）

### 6. `06-實體關係圖.mermaid.md` 🟢 **可選**
- **狀態**：⏳ 待檢查
- **檢查項目**：
  - ⏳ ER 圖中是否顯示狀態欄位
  - ⏳ 如果顯示，需要確認狀態值是否與狀態圖一致
- **建議**：如果 ER 圖包含狀態欄位，建議同步更新

### 7. `13-序列圖.mermaid.md` 🟢 **可選**
- **狀態**：⏳ 待檢查
- **檢查項目**：
  - ⏳ 序列圖中是否顯示狀態轉換
  - ⏳ 如果顯示，需要確認狀態轉換是否與狀態圖一致
- **建議**：如果序列圖包含狀態轉換，建議同步更新

### 8. `20-完整架構流程圖.mermaid.md` 🟢 **可選**
- **狀態**：⏳ 待檢查
- **檢查項目**：
  - ⏳ 是否包含 PR、協作、待辦相關流程
  - ⏳ 如果包含，需要確認狀態描述是否與狀態圖一致
- **建議**：如果包含相關流程，建議同步更新

---

## 📋 同步檢查清單

### 高優先級（必須完成）
- [x] **`36-狀態枚舉值定義.md`** - 添加 PR、協作邀請、協作者關係狀態定義 ✅ 已完成

### 中優先級（建議完成）
- [ ] **`04-業務流程圖.mermaid.md`** - 確認狀態描述一致性
- [ ] **`15-領域事件時間軸圖.mermaid.md`** - 確認事件描述一致性
- [ ] **`01-系統架構思維導圖.mermaid.md`** - 檢查並更新狀態相關架構說明

### 低優先級（可選完成）
- [ ] **`06-實體關係圖.mermaid.md`** - 檢查並更新狀態欄位
- [ ] **`13-序列圖.mermaid.md`** - 檢查並更新狀態轉換
- [ ] **`20-完整架構流程圖.mermaid.md`** - 檢查並更新狀態描述

---

## 📝 更新原則

1. **單一真實來源**：`36-狀態枚舉值定義.md` 是所有狀態定義的單一真實來源
2. **狀態圖優先**：`14-狀態圖.mermaid.md` 是狀態流轉的視覺化參考
3. **一致性檢查**：其他文檔應引用或對齊狀態定義，而非重複定義
4. **文檔同步**：狀態定義變更後，必須同步更新相關文檔

---

## 🔗 相關文檔

- [狀態圖](./14-狀態圖.mermaid.md) - 狀態流轉視覺化
- [狀態枚舉值定義](./36-狀態枚舉值定義.md) - 狀態定義單一真實來源
- [業務流程圖](./04-業務流程圖.mermaid.md) - 業務流程視覺化
- [領域事件時間軸圖](./15-領域事件時間軸圖.mermaid.md) - 領域事件時間軸

---

**最後更新**：2025-01-15  
**維護者**：開發團隊

