# æ¨¡å‹ç»“æ„åˆ†ææŠ¥å‘Š

> ğŸ“‹ **ç›®çš„**ï¼šåˆ†æ `src/app/shared/models` ç›®å½•çš„ç»“æ„å’Œæ–‡ä»¶å‘½åä¸ä¸€è‡´é—®é¢˜ï¼Œä»¥åŠä¸ `src/app/core/infra/types` çš„å†²çªæƒ…å†µ

**ç”Ÿæˆæ—¶é—´**ï¼š2025-01-15  
**åˆ†æèŒƒå›´**ï¼š`src/app/shared/models` å’Œ `src/app/core/infra/types`

---

## ğŸ“Š å½“å‰ç»“æ„åˆ†æ

### 1. `src/app/shared/models` ç›®å½•ç»“æ„

#### âœ… æ¨¡å—åŒ–ç›®å½•ï¼ˆ11ä¸ªæ¨¡å—ï¼‰
```
src/app/shared/models/
â”œâ”€â”€ account/              âœ… æ¨¡å—åŒ–ç»“æ„
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts
â”œâ”€â”€ blueprint/            âœ… æ¨¡å—åŒ–ç»“æ„
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts
â”œâ”€â”€ bot/                  âœ… æ¨¡å—åŒ–ç»“æ„
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts
â”œâ”€â”€ collaboration/        âœ… æ¨¡å—åŒ–ç»“æ„
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts
â”œâ”€â”€ communication/        âœ… æ¨¡å—åŒ–ç»“æ„
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts
â”œâ”€â”€ data/                 âœ… æ¨¡å—åŒ–ç»“æ„ï¼ˆåŒ…å« ActivityLogï¼‰
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts
â”œâ”€â”€ issue/                âœ… æ¨¡å—åŒ–ç»“æ„
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts
â”œâ”€â”€ permission/           âœ… æ¨¡å—åŒ–ç»“æ„
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts
â”œâ”€â”€ quality/              âœ… æ¨¡å—åŒ–ç»“æ„ï¼ˆåŒ…å« QualityCheckï¼‰
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts
â”œâ”€â”€ system/               âœ… æ¨¡å—åŒ–ç»“æ„
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts
â””â”€â”€ task/                 âœ… æ¨¡å—åŒ–ç»“æ„
    â”œâ”€â”€ index.ts
    â””â”€â”€ types.ts
```

#### âš ï¸ é—ç•™æ–‡ä»¶ï¼ˆ2ä¸ªï¼‰
```
src/app/shared/models/
â”œâ”€â”€ activity-log.model.ts    âš ï¸ é—ç•™æ–‡ä»¶ï¼ˆå†…å®¹å·²è¿ç§»åˆ° data/types.tsï¼‰
â””â”€â”€ quality-check.model.ts   âš ï¸ é—ç•™æ–‡ä»¶ï¼ˆå†…å®¹å·²è¿ç§»åˆ° quality/types.tsï¼‰
```

---

## ğŸ” é—®é¢˜åˆ†æ

### é—®é¢˜ 1ï¼šæ–‡ä»¶å‘½åä¸ä¸€è‡´

**ç°çŠ¶**ï¼š
- âœ… æ¨¡å—åŒ–ç›®å½•ï¼šä½¿ç”¨ `types.ts` å‘½å
- âš ï¸ é—ç•™æ–‡ä»¶ï¼šä½¿ç”¨ `.model.ts` åç¼€

**å½±å“**ï¼š
- å‘½åä¸ç»Ÿä¸€ï¼Œå½±å“ä»£ç å¯ç»´æŠ¤æ€§
- æ–°å¼€å‘è€…å¯èƒ½ä¸çŸ¥é“åº”è¯¥ä½¿ç”¨å“ªä¸ªæ–‡ä»¶

### é—®é¢˜ 2ï¼šå†…å®¹é‡å¤å®šä¹‰

#### ActivityLog ç±»å‹é‡å¤

**ä½ç½® 1**ï¼š`src/app/shared/models/activity-log.model.ts`
```typescript
export enum ActivityLogResourceType { ... }
export interface ActivityLog { ... }
export interface ActivityLogDetail { ... }
export interface ActivityLogInsert { ... }
export interface ActivityLogFilters { ... }
```

**ä½ç½® 2**ï¼š`src/app/shared/models/data/types.ts`
```typescript
export enum ActivityLogResourceType { ... }
export interface ActivityLog { ... }
export interface ActivityLogDetail { ... }
export interface ActivityLogInsert { ... }
export interface ActivityLogFilters { ... }
```

**çŠ¶æ€**ï¼šâœ… å†…å®¹å·²è¿ç§»ï¼Œé—ç•™æ–‡ä»¶å¯ä»¥åˆ é™¤

#### QualityCheck ç±»å‹é‡å¤

**ä½ç½® 1**ï¼š`src/app/shared/models/quality-check.model.ts`
```typescript
export enum QualityCheckType { ... }
export enum QualityCheckStatus { ... }
export interface QualityCheckItem { ... }
export interface QualityCheck { ... }
export interface QualityCheckDetail { ... }
export interface QualityCheckInsert { ... }
export interface QualityCheckUpdate { ... }
```

**ä½ç½® 2**ï¼š`src/app/shared/models/quality/types.ts`
```typescript
export enum QualityCheckType { ... }
export enum QualityCheckStatus { ... }
export interface QualityCheckItem { ... }
export interface QualityCheck { ... }
export interface QualityCheckDetail { ... }
export interface QualityCheckInsert { ... }
export interface QualityCheckUpdate { ... }
```

**çŠ¶æ€**ï¼šâœ… å†…å®¹å·²è¿ç§»ï¼Œé—ç•™æ–‡ä»¶å¯ä»¥åˆ é™¤

### é—®é¢˜ 3ï¼šå¯¼å‡ºçŠ¶æ€

**`src/app/shared/models/index.ts`**ï¼š
```typescript
// æŒ‰æ¨¡å—å¯¼å‡ºï¼ˆæŒ‰ä¾èµ–é¡ºåºï¼‰
export * from './account';
export * from './collaboration';
export * from './permission';
export * from './blueprint';
export * from './task';
export * from './quality';        // âœ… åŒ…å« QualityCheck
export * from './issue';
export * from './communication';
export * from './data';           // âœ… åŒ…å« ActivityLog
export * from './bot';
export * from './system';

// æ³¨æ„ï¼šquality-check.model.ts å’Œ activity-log.model.ts å·²è¿ç§»åˆ°æ¨¡å—ç›®å½•
// è¯·ä½¿ç”¨ @shared/models/quality å’Œ @shared/models/data å¯¼å…¥
// ä»¥ä¸‹å¯¼å‡ºä»…ç”¨äºå‘åå…¼å®¹ï¼Œå»ºè®®è¿ç§»åˆ°æ–°æ¨¡å—
// export * from './quality-check.model';    // âœ… å·²æ³¨é‡Š
// export * from './activity-log.model';     // âœ… å·²æ³¨é‡Š
```

**çŠ¶æ€**ï¼šâœ… é—ç•™æ–‡ä»¶å¯¼å‡ºå·²æ³¨é‡Šï¼Œä¸ä¼šé€ æˆç±»å‹å†²çª

---

## ğŸ”„ ä¸ `src/app/core/infra/types` çš„å…³ç³»

### èŒè´£åˆ’åˆ†

| å±‚çº§ | ç›®å½• | ç”¨é€” | å†…å®¹ |
|------|------|------|------|
| **åº”ç”¨å±‚** | `src/app/shared/models` | åº”ç”¨å±‚æ•°æ®æ¨¡å‹ | æ•°æ®å®ä½“ç±»å‹ï¼ˆcamelCaseï¼‰ã€ä¸šåŠ¡æšä¸¾ã€ä¸šåŠ¡æ¥å£ |
| **åŸºç¡€è®¾æ–½å±‚** | `src/app/core/infra/types` | Repository å±‚ç±»å‹ | æšä¸¾ç±»å‹ï¼ˆç”¨äº Repository æŸ¥è¯¢ï¼‰ |

### å½“å‰ `core/infra/types` å†…å®¹

```
src/app/core/infra/types/
â”œâ”€â”€ database.types.ts      âœ… æ•°æ®åº“ç±»å‹å®šä¹‰ï¼ˆä» Supabase ç”Ÿæˆï¼‰
â”œâ”€â”€ account.types.ts       âœ… è´¦æˆ·ç›¸å…³æšä¸¾ï¼ˆAccountType, AccountStatus, TeamMemberRoleï¼‰
â”œâ”€â”€ blueprint.types.ts     âœ… è“å›¾ç›¸å…³æšä¸¾ï¼ˆBlueprintStatus, BranchType, BranchStatus, PRStatusï¼‰
â”œâ”€â”€ collaboration.types.ts âœ… åä½œç›¸å…³æšä¸¾ï¼ˆCollaborationType, CollaborationStatus, InvitationStatusï¼‰
â”œâ”€â”€ task.types.ts          âœ… ä»»åŠ¡ç›¸å…³æšä¸¾ï¼ˆTaskType, TaskStatus, TaskPriority, TaskAssigneeType, TaskListType, TaskDependencyTypeï¼‰
â””â”€â”€ index.ts               âœ… ç»Ÿä¸€å¯¼å‡º
```

### å†²çªæ£€æŸ¥

**æ£€æŸ¥ç»“æœ**ï¼šâœ… **æ— å†²çª**

**åŸå› **ï¼š
1. `core/infra/types` åªåŒ…å«**æšä¸¾ç±»å‹**ï¼ˆç”¨äº Repository å±‚çš„æŸ¥è¯¢æ–¹æ³•ï¼‰
2. `shared/models` åŒ…å«**æ•°æ®å®ä½“ç±»å‹**å’Œ**ä¸šåŠ¡æšä¸¾**ï¼ˆç”¨äºåº”ç”¨å±‚ï¼‰
3. ä¸¤è€…èŒè´£ä¸åŒï¼Œä¸ä¼šäº§ç”Ÿç±»å‹å†²çª

**ç¤ºä¾‹**ï¼š
- `core/infra/types/task.types.ts` å®šä¹‰ `TaskStatus` æšä¸¾ï¼ˆç”¨äº Repository æŸ¥è¯¢ï¼‰
- `shared/models/task/types.ts` å®šä¹‰ `Task` å®ä½“ç±»å‹ï¼ˆç”¨äºåº”ç”¨å±‚ï¼‰

---

## âœ… ä½¿ç”¨æƒ…å†µæ£€æŸ¥

### ActivityLog ä½¿ç”¨æƒ…å†µ

**å½“å‰ä½¿ç”¨**ï¼š
```typescript
// src/app/shared/services/analytics.service.ts
import { ActivityLog, ActivityLogDetail, ActivityLogFilters, ActivityLogResourceType } from '@shared';
// âœ… ä» @shared å¯¼å…¥ï¼Œä¼šä» data/types.ts è·å–
```

**é—ç•™æ–‡ä»¶**ï¼š`activity-log.model.ts`
- âŒ æ²¡æœ‰æ–‡ä»¶ç›´æ¥å¯¼å…¥
- âœ… å†…å®¹å·²è¿ç§»åˆ° `data/types.ts`
- âœ… å¯ä»¥å®‰å…¨åˆ é™¤

### QualityCheck ä½¿ç”¨æƒ…å†µ

**å½“å‰ä½¿ç”¨**ï¼š
```typescript
// src/app/shared/services/quality-check.service.ts
import { QualityCheck, QualityCheckDetail } from '@shared';
// âœ… ä» @shared å¯¼å…¥ï¼Œä¼šä» quality/types.ts è·å–
```

**é—ç•™æ–‡ä»¶**ï¼š`quality-check.model.ts`
- âŒ æ²¡æœ‰æ–‡ä»¶ç›´æ¥å¯¼å…¥
- âœ… å†…å®¹å·²è¿ç§»åˆ° `quality/types.ts`
- âœ… å¯ä»¥å®‰å…¨åˆ é™¤

---

## ğŸ¯ é—®é¢˜æ€»ç»“

### ä¸»è¦é—®é¢˜

1. **æ–‡ä»¶å‘½åä¸ä¸€è‡´**
   - æ¨¡å—åŒ–ç›®å½•ä½¿ç”¨ `types.ts`
   - é—ç•™æ–‡ä»¶ä½¿ç”¨ `.model.ts` åç¼€

2. **é—ç•™æ–‡ä»¶æœªåˆ é™¤**
   - `activity-log.model.ts` - å†…å®¹å·²è¿ç§»åˆ° `data/types.ts`
   - `quality-check.model.ts` - å†…å®¹å·²è¿ç§»åˆ° `quality/types.ts`

3. **æ½œåœ¨æ··æ·†**
   - æ–°å¼€å‘è€…å¯èƒ½ä¸çŸ¥é“åº”è¯¥ä½¿ç”¨å“ªä¸ªæ–‡ä»¶
   - è™½ç„¶å¯¼å‡ºå·²æ³¨é‡Šï¼Œä½†æ–‡ä»¶ä»å­˜åœ¨

### æ— å†²çªç¡®è®¤

âœ… **ä¸ `core/infra/types` æ— å†²çª**
- èŒè´£ä¸åŒï¼š`core/infra/types` å­˜æ”¾æšä¸¾ï¼ˆRepository å±‚ï¼‰ï¼Œ`shared/models` å­˜æ”¾æ•°æ®æ¨¡å‹ï¼ˆåº”ç”¨å±‚ï¼‰
- ç±»å‹ä¸é‡å¤ï¼šæ²¡æœ‰ç›¸åŒçš„ç±»å‹åœ¨ä¸¤ä¸ªåœ°æ–¹å®šä¹‰

---

## ğŸ”§ å»ºè®®è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šåˆ é™¤é—ç•™æ–‡ä»¶ï¼ˆæ¨èï¼‰

**æ­¥éª¤**ï¼š
1. ç¡®è®¤æ²¡æœ‰æ–‡ä»¶ç›´æ¥å¯¼å…¥é—ç•™æ–‡ä»¶ï¼ˆâœ… å·²ç¡®è®¤ï¼‰
2. åˆ é™¤ `activity-log.model.ts`
3. åˆ é™¤ `quality-check.model.ts`
4. æ›´æ–° `index.ts` æ³¨é‡Šï¼Œè¯´æ˜è¿ç§»å·²å®Œæˆ

**ä¼˜ç‚¹**ï¼š
- ç»Ÿä¸€æ–‡ä»¶ç»“æ„
- æ¶ˆé™¤æ··æ·†
- ä¿æŒä»£ç æ•´æ´

**é£é™©**ï¼š
- æ— é£é™©ï¼ˆå·²ç¡®è®¤æ— ç›´æ¥å¯¼å…¥ï¼‰

### æ–¹æ¡ˆ 2ï¼šä¿ç•™é—ç•™æ–‡ä»¶ä½œä¸ºå‘åå…¼å®¹ï¼ˆä¸æ¨èï¼‰

**æ­¥éª¤**ï¼š
1. åœ¨é—ç•™æ–‡ä»¶ä¸­æ·»åŠ  `@deprecated` æ ‡è®°
2. é‡æ–°å¯¼å‡ºæ¨¡å—ç›®å½•çš„ç±»å‹
3. æ·»åŠ è¿ç§»è¯´æ˜

**ç¼ºç‚¹**ï¼š
- å¢åŠ ç»´æŠ¤æˆæœ¬
- å¯èƒ½é€ æˆæ··æ·†
- ä¸ç¬¦åˆä¼ä¸šçº§æ ‡å‡†

---

## ğŸ“‹ å®æ–½å»ºè®®

### ç«‹å³è¡ŒåŠ¨

1. âœ… **åˆ é™¤é—ç•™æ–‡ä»¶**
   - åˆ é™¤ `src/app/shared/models/activity-log.model.ts`
   - åˆ é™¤ `src/app/shared/models/quality-check.model.ts`

2. âœ… **æ›´æ–°æ–‡æ¡£**
   - æ›´æ–° `src/app/shared/models/index.ts` æ³¨é‡Š
   - è¯´æ˜è¿ç§»å·²å®Œæˆ

3. âœ… **éªŒè¯**
   - è¿è¡Œç±»å‹æ£€æŸ¥ï¼š`npx tsc --noEmit`
   - è¿è¡Œä»£ç æ£€æŸ¥ï¼š`yarn lint`
   - ç¡®è®¤æ— é”™è¯¯

### é•¿æœŸç»´æŠ¤

1. **ç»Ÿä¸€å‘½åè§„èŒƒ**
   - æ‰€æœ‰æ¨¡å—ä½¿ç”¨ `types.ts` å‘½å
   - ä¸å†ä½¿ç”¨ `.model.ts` åç¼€

2. **æ–‡æ¡£æ›´æ–°**
   - åœ¨ README ä¸­è¯´æ˜æ¨¡å‹ç»“æ„
   - è¯´æ˜ä¸ `core/infra/types` çš„åŒºåˆ«

---

## ğŸ“Š ç»“æ„å¯¹æ¯”

### ç†æƒ³ç»“æ„ï¼ˆå½“å‰çŠ¶æ€ï¼Œå¾…æ¸…ç†ï¼‰

```
src/app/shared/models/
â”œâ”€â”€ account/
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts          âœ… ç»Ÿä¸€å‘½å
â”œâ”€â”€ blueprint/
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts          âœ… ç»Ÿä¸€å‘½å
â”œâ”€â”€ ... (å…¶ä»–æ¨¡å—)
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts          âœ… ç»Ÿä¸€å‘½åï¼ˆåŒ…å« ActivityLogï¼‰
â”œâ”€â”€ quality/
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts          âœ… ç»Ÿä¸€å‘½åï¼ˆåŒ…å« QualityCheckï¼‰
â”œâ”€â”€ activity-log.model.ts âš ï¸ åº”åˆ é™¤
â”œâ”€â”€ quality-check.model.ts âš ï¸ åº”åˆ é™¤
â””â”€â”€ index.ts
```

### æ¸…ç†åç»“æ„ï¼ˆç›®æ ‡ï¼‰

```
src/app/shared/models/
â”œâ”€â”€ account/
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts
â”œâ”€â”€ blueprint/
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts
â”œâ”€â”€ ... (å…¶ä»–æ¨¡å—)
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts          âœ… åŒ…å« ActivityLog
â”œâ”€â”€ quality/
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts          âœ… åŒ…å« QualityCheck
â””â”€â”€ index.ts              âœ… ç»Ÿä¸€å¯¼å‡º
```

---

## ğŸ” ç±»å‹å®šä¹‰å¯¹æ¯”

### ActivityLog ç±»å‹å®šä¹‰

| ä½ç½® | ç±»å‹ | å®šä¹‰æ–¹å¼ | çŠ¶æ€ |
|------|------|----------|------|
| `activity-log.model.ts` | `ActivityLog` | æ‰‹åŠ¨å®šä¹‰æ¥å£ï¼ˆcamelCaseï¼‰ | âš ï¸ é—ç•™ |
| `data/types.ts` | `ActivityLog` | æ‰‹åŠ¨å®šä¹‰æ¥å£ï¼ˆcamelCaseï¼‰ | âœ… å½“å‰ä½¿ç”¨ |
| `core/infra/repositories/activity-log.repository.ts` | `ActivityLog` | ä» Database ç±»å‹æå– | âœ… Repository å±‚ |

**ç»“è®º**ï¼šæ— å†²çªï¼ŒèŒè´£ä¸åŒ

### QualityCheck ç±»å‹å®šä¹‰

| ä½ç½® | ç±»å‹ | å®šä¹‰æ–¹å¼ | çŠ¶æ€ |
|------|------|----------|------|
| `quality-check.model.ts` | `QualityCheck` | æ‰‹åŠ¨å®šä¹‰æ¥å£ï¼ˆcamelCaseï¼‰ | âš ï¸ é—ç•™ |
| `quality/types.ts` | `QualityCheck` | æ‰‹åŠ¨å®šä¹‰æ¥å£ï¼ˆcamelCaseï¼‰ | âœ… å½“å‰ä½¿ç”¨ |
| `core/infra/repositories/quality-check.repository.ts` | `QualityCheck` | ä» Database ç±»å‹æå– | âœ… Repository å±‚ |

**ç»“è®º**ï¼šæ— å†²çªï¼ŒèŒè´£ä¸åŒ

---

## âœ… éªŒè¯æ¸…å•

- [x] æ£€æŸ¥é—ç•™æ–‡ä»¶æ˜¯å¦æœ‰ç›´æ¥å¯¼å…¥
- [x] æ£€æŸ¥ç±»å‹æ˜¯å¦é‡å¤å®šä¹‰
- [x] æ£€æŸ¥ä¸ `core/infra/types` æ˜¯å¦æœ‰å†²çª
- [x] æ£€æŸ¥å¯¼å‡ºæ˜¯å¦æ­£ç¡®
- [x] åˆ é™¤é—ç•™æ–‡ä»¶
- [x] æ›´æ–°æ–‡æ¡£æ³¨é‡Š
- [x] è¿è¡Œç±»å‹æ£€æŸ¥éªŒè¯

---

**æœ€åæ›´æ–°**ï¼š2025-01-15  
**åˆ†æè€…**ï¼šAI Assistant  
**çŠ¶æ€**ï¼šâœ… åˆ†æå®Œæˆï¼Œé—ç•™æ–‡ä»¶å·²åˆ é™¤

