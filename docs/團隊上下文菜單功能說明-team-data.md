# 團隊上下文菜單功能說明 (team-data.json)

> 📋 **目的**：說明團隊上下文 (Team Context) 的所有功能與路由連結，幫助開發者理解 `team-data.json` 的設計理念與實現細節

**最後更新**：2025-11-20  
**數據文件**：`src/assets/tmp/team-data.json`  
**相關文檔**：
- [工作區上下文使用與規劃指南](./工作區上下文使用與規劃指南.md) - 完整的上下文系統說明
- [工作區上下文切換流程圖](./工作區上下文切換流程圖.mermaid.md) - 視覺化流程圖

---

## 🎯 團隊上下文定位

### 核心理念
**團隊協作與任務執行中心**

- **適用對象**：團隊成員、執行人員
- **使用場景**：團隊日常協作、任務執行
- **權限範圍**：團隊級別數據
- **設計特點**：聚焦於執行、功能集是組織的子集

### 設計原則

1. **執行導向**：聚焦於任務執行和進度更新
2. **簡化管理**：移除複雜的管理功能，保留核心執行功能
3. **團隊協作**：強化團隊內部溝通和協作
4. **快速訪問**：提供團隊常用功能的快捷入口

---

## 📋 功能模組清單

團隊上下文包含 **5 大功能模組**，共 **20 個功能頁面**：

### 模組概覽

| 模組名稱 | 功能數量 | 核心能力 | 優先級 |
|---------|---------|---------|--------|
| 團隊管理 | 1 | 成員查看 | ⭐⭐⭐ |
| 團隊任務 | 8 | 任務執行、進度更新 | ⭐⭐⭐⭐⭐ |
| 團隊問題 | 2 | 問題查看、指派 | ⭐⭐⭐⭐ |
| 團隊溝通 | 3 | 討論、通知 | ⭐⭐⭐⭐ |
| 團隊文檔 | 2 | 文檔訪問 | ⭐⭐⭐ |

---

## 1️⃣ 團隊管理 (Team Management)

### 模組說明
查看團隊成員資訊（僅查看，不含管理功能）

### 包含功能

| 功能名稱 | 路由 | i18n Key | 說明 |
|---------|------|----------|------|
| 團隊成員 | `/accounts/org/teams/:id/members` | `menu.team.management.members` | 團隊成員列表 |

### 功能詳解

**團隊成員**
- **路由模式**：`/accounts/org/teams/:id/members`
- **參數說明**：`:id` 為團隊 ID
- **主要功能**：
  - 查看團隊所有成員
  - 查看成員角色（團隊負責人、成員）
  - 查看成員聯絡方式
  - 查看成員在線狀態
- **權限限制**：僅可查看，不可添加或移除成員
- **與組織上下文的差異**：沒有成員管理功能（需在組織上下文操作）

---

## 2️⃣ 團隊任務 (Team Tasks)

### 模組說明
團隊任務執行中心，提供多視角任務查看和更新

### 包含功能

| 功能名稱 | 路由 | i18n Key | 說明 |
|---------|------|----------|------|
| 任務看板 | `/tasks/board?team=:id` | `menu.team.tasks.board` | Kanban 視圖 |
| 任務日曆 | `/tasks/calendar?team=:id` | `menu.team.tasks.calendar` | 日曆視圖 |
| 任務列表 | `/tasks/list?team=:id` | `menu.team.tasks.list` | 列表視圖 |
| 任務樹狀圖 | `/tasks/tree?team=:id` | `menu.team.tasks.tree` | 樹狀結構視圖 |
| 待辦清單 | `/tasks/todo?team=:id` | `menu.team.tasks.todo` | 待辦事項 |
| 日報 | `/tasks/daily-reports?team=:id` | `menu.team.tasks.dailyReports` | 施工日報 |
| 施工照片 | `/tasks/photos?team=:id` | `menu.team.tasks.photos` | 現場照片 |
| 任務進度 | `/tasks/progress?team=:id` | `menu.team.tasks.progress` | 進度追蹤 |

### 與組織上下文的差異

**沒有的功能**：
- ❌ 創建任務（需在組織上下文創建）
- ❌ 任務詳情（完整編輯功能）
- ❌ 任務表單（完整編輯表單）
- ❌ 任務指派（由組織或專案經理指派）
- ❌ 天氣記錄（簡化功能）

**保留的功能**：
- ✅ 多視角查看（看板、日曆、列表、樹狀圖）
- ✅ 任務執行和狀態更新
- ✅ 待辦清單管理
- ✅ 施工日報填寫
- ✅ 現場照片上傳
- ✅ 進度更新

### 功能詳解

**任務看板**
- **路由模式**：`/tasks/board?team=:id`
- **查詢參數**：`team` 為團隊 ID
- **主要功能**：
  - 查看團隊任務（Kanban 佈局）
  - 拖拽更新任務狀態
  - 快速查看任務詳情
  - 篩選和排序任務
- **數據範圍**：僅限當前團隊的任務
- **特點**：聚焦於執行和狀態更新

**任務日曆**
- **路由模式**：`/tasks/calendar?team=:id`
- **主要功能**：
  - 按日期展示團隊任務
  - 查看任務截止日期
  - 快速定位今日任務
  - 月度/週度視圖切換

**任務列表**
- **路由模式**：`/tasks/list?team=:id`
- **主要功能**：
  - 表格視圖展示任務
  - 多條件篩選
  - 批量標記完成
  - 匯出任務列表

**任務樹狀圖**
- **路由模式**：`/tasks/tree?team=:id`
- **主要功能**：
  - 展示任務層級關係
  - 查看子任務
  - 折疊/展開任務樹
  - 快速定位任務

**待辦清單**
- **路由模式**：`/tasks/todo?team=:id`
- **主要功能**：
  - 團隊待辦事項列表
  - 標記完成狀態
  - 設置優先級
  - 添加備註
- **數據範圍**：團隊級別的待辦事項

**日報**
- **路由模式**：`/tasks/daily-reports?team=:id`
- **主要功能**：
  - 填寫施工日報
  - 記錄工時
  - 記錄材料使用
  - 記錄施工進度
  - 添加備註和說明
- **適用場景**：工地管理、施工項目

**施工照片**
- **路由模式**：`/tasks/photos?team=:id`
- **主要功能**：
  - 上傳現場照片
  - 按日期分組
  - 添加照片描述
  - 地理位置標記（可選）
  - 與任務關聯
- **存儲**：Supabase Storage

**任務進度**
- **路由模式**：`/tasks/progress?team=:id`
- **主要功能**：
  - 更新任務進度百分比
  - 查看進度趨勢
  - 添加進度說明
  - 查看進度歷史

---

## 3️⃣ 團隊問題 (Team Issues)

### 模組說明
團隊問題查看和指派（簡化版）

### 包含功能

| 功能名稱 | 路由 | i18n Key | 說明 |
|---------|------|----------|------|
| 問題列表 | `/issues?team=:id` | `menu.team.issues.list` | 問題列表（過濾團隊相關） |
| 問題指派 | `/issues/assignments?team=:id` | `menu.team.issues.assignments` | 團隊問題分配 |

### 與組織上下文的差異

**沒有的功能**：
- ❌ 創建問題（需在組織上下文創建）
- ❌ 問題詳情（完整編輯功能）
- ❌ 問題處理（完整處理流程）
- ❌ 處理照片
- ❌ 關閉問題
- ❌ 問題同步日誌

**保留的功能**：
- ✅ 查看團隊相關問題
- ✅ 團隊內部問題指派

### 功能詳解

**問題列表**
- **路由模式**：`/issues?team=:id`
- **查詢參數**：`team` 為團隊 ID
- **主要功能**：
  - 查看團隊相關的問題
  - 按狀態篩選（待處理、處理中、已解決）
  - 按優先級排序
  - 快速查看問題描述
- **數據範圍**：僅限與當前團隊相關的問題
- **特點**：只讀視圖，不能創建或編輯問題

**問題指派**
- **路由模式**：`/issues/assignments?team=:id`
- **主要功能**：
  - 查看團隊問題指派情況
  - 將問題指派給團隊成員
  - 查看成員的問題負載
  - 重新分配問題
- **權限**：團隊負責人可指派問題
- **限制**：不能創建新問題，只能指派現有問題

---

## 4️⃣ 團隊溝通 (Team Communication)

### 模組說明
團隊內部溝通和協作（簡化版）

### 包含功能

| 功能名稱 | 路由 | i18n Key | 說明 |
|---------|------|----------|------|
| 討論區 | `/communication/discussions?team=:id` | `menu.team.communication.discussions` | 團隊討論區 |
| 評論管理 | `/communication/comments?team=:id` | `menu.team.communication.comments` | 評論列表 |
| 團隊通知 | `/communication/team-notify?team=:id` | `menu.team.communication.teamNotify` | 團隊通知 |

### 與組織上下文的差異

**沒有的功能**：
- ❌ 發表評論（完整編輯功能）
- ❌ 通知中心（組織級別）
- ❌ 通知詳情（完整功能）
- ❌ 通知規則設定
- ❌ 即時通知（組織級別）
- ❌ 待辦中心（組織級別）

**保留的功能**：
- ✅ 團隊討論區
- ✅ 評論列表（只讀）
- ✅ 團隊通知（簡化版）

### 功能詳解

**討論區**
- **路由模式**：`/communication/discussions?team=:id`
- **查詢參數**：`team` 為團隊 ID
- **主要功能**：
  - 查看團隊討論話題
  - 參與討論
  - 回覆評論
  - 點讚和反應
- **數據範圍**：僅限團隊內部討論
- **特點**：聚焦於團隊內部溝通

**評論管理**
- **路由模式**：`/communication/comments?team=:id`
- **主要功能**：
  - 查看團隊相關的評論
  - 按時間排序
  - 篩選評論類型
  - 快速定位相關內容
- **數據範圍**：團隊任務、文檔、討論的評論
- **限制**：主要為查看功能

**團隊通知**
- **路由模式**：`/communication/team-notify?team=:id`
- **主要功能**：
  - 查看團隊通知
  - 標記已讀
  - 快速跳轉到相關內容
  - 按類型篩選
- **通知類型**：
  - 任務指派通知
  - 討論提及通知
  - 文檔更新通知
  - 團隊公告
- **特點**：僅限團隊範圍的通知

---

## 5️⃣ 團隊文檔 (Team Documents)

### 模組說明
團隊文檔快速訪問（簡化版）

### 包含功能

| 功能名稱 | 路由 | i18n Key | 說明 |
|---------|------|----------|------|
| 文檔列表 | `/documents?team=:id` | `menu.team.documents.list` | 團隊文檔（過濾團隊可訪問） |
| 上傳文檔 | `/documents/upload` | `menu.team.documents.upload` | 上傳文件 |

### 與組織上下文的差異

**沒有的功能**：
- ❌ 文檔瀏覽器（完整功能）
- ❌ 文檔預覽（進階功能）
- ❌ 圖紙查看器
- ❌ 文檔元數據管理
- ❌ 版本管理
- ❌ 權限設置

**保留的功能**：
- ✅ 文檔列表（團隊可訪問的文檔）
- ✅ 上傳文檔（基本功能）

### 功能詳解

**文檔列表**
- **路由模式**：`/documents?team=:id`
- **查詢參數**：`team` 為團隊 ID
- **主要功能**：
  - 查看團隊可訪問的文檔
  - 下載文檔
  - 簡單預覽（基本格式）
  - 按類型篩選
- **數據範圍**：團隊權限內的文檔
- **特點**：快速訪問，簡化功能

**上傳文檔**
- **路由模式**：`/documents/upload`
- **主要功能**：
  - 選擇文件上傳
  - 填寫文檔描述
  - 設置文檔類型
  - 關聯到團隊
- **權限**：團隊成員均可上傳
- **限制**：無版本控制和進階權限設置

---

## 🗂️ 路由參數說明

### 動態參數

| 參數名 | 示例值 | 說明 | 獲取方式 |
|--------|--------|------|----------|
| `:id` | `uuid-team-xxx` | 團隊 ID | `WorkspaceContextService.contextId()` |
| `?team=:id` | `?team=uuid-team-xxx` | 團隊 ID（查詢參數） | URL 查詢參數 |

### 參數替換邏輯

```typescript
// 原始路由
'/accounts/org/teams/:id/members'
'/tasks/board?team=:id'

// 替換後（假設當前團隊 ID 為 'team-abc'）
'/accounts/org/teams/team-abc/members'
'/tasks/board?team=team-abc'
```

---

## 🎨 使用場景範例

### 場景 1：團隊成員每日任務檢視

```
早晨：
1. 切換到團隊上下文
2. 團隊任務 → 任務看板 → 查看今日任務
3. 拖動任務到「進行中」欄位

工作中：
4. 團隊任務 → 施工照片 → 上傳現場照片
5. 團隊任務 → 日報 → 填寫施工日報

下午：
6. 團隊任務 → 任務進度 → 更新進度百分比
7. 拖動任務到「已完成」欄位
```

### 場景 2：團隊負責人任務協調

```
1. 進入團隊上下文
2. 團隊管理 → 團隊成員 → 查看成員狀態
3. 團隊任務 → 任務列表 → 查看所有任務
4. 團隊問題 → 問題指派 → 分配問題給成員
5. 團隊溝通 → 討論區 → 發布團隊公告
```

### 場景 3：施工現場記錄

```
1. 團隊任務 → 施工照片 → 上傳現場照片
2. 添加照片描述（位置、內容、問題）
3. 團隊任務 → 日報 → 填寫今日施工記錄
4. 記錄工時、材料使用、進度
5. 團隊問題 → 問題列表 → 查看待處理問題
6. 團隊溝通 → 討論區 → 討論現場問題
```

---

## 🔍 與其他上下文的差異

### 團隊 vs 組織

| 特性 | 團隊上下文 | 組織上下文 |
|------|-----------|-----------|
| **成員管理** | ⚠️ 僅查看 | ✅ 完整管理 |
| **任務管理** | ✅ 執行和更新 | ✅ 完整管理（創建、編輯、刪除） |
| **藍圖功能** | ❌ 無（使用組織藍圖） | ✅ 完整 Git-like 分支管理 |
| **問題追蹤** | ⚠️ 查看和指派 | ✅ 完整管理 |
| **溝通功能** | ✅ 團隊討論 | ✅ 組織級溝通 + 團隊通知 |
| **文檔管理** | ⚠️ 基本訪問 | ✅ 完整管理（版本、權限） |
| **數據分析** | ❌ | ✅ 完整分析和報表 |
| **品質管理** | ❌ | ✅ 品質檢查、驗收 |

### 團隊 vs 個人

| 特性 | 團隊上下文 | 個人上下文 |
|------|-----------|-----------|
| **數據範圍** | 限定於特定團隊 | 跨組織、跨團隊 |
| **任務視圖** | 團隊任務視圖 | 個人聚合視圖 |
| **文檔管理** | 團隊文檔 | 個人文檔 |
| **通知** | 團隊通知 | 所有通知 |
| **藍圖** | 使用組織藍圖 | 個人藍圖 |

---

## 📐 開發指南

### 添加新功能到團隊上下文

**判斷標準**：
- 是否為團隊執行功能？ → 是 → 加入團隊上下文
- 是否需要團隊成員協作？ → 是 → 加入團隊上下文
- 是否為簡化的查看功能？ → 是 → 考慮加入團隊上下文

**不應添加的功能**：
- 複雜的管理功能 → 應在組織上下文
- 數據分析功能 → 應在組織上下文
- 個人數據 → 應在個人上下文

### 功能簡化原則

團隊上下文的功能應該：
1. **聚焦執行**：保留執行相關功能，移除管理功能
2. **簡化界面**：提供簡潔的界面，減少複雜操作
3. **快速訪問**：優化常用功能的訪問路徑
4. **團隊協作**：強化團隊內部溝通和協作

---

## 💡 最佳實踐

### DO's ✅

1. **快速更新狀態**：充分利用看板拖拽功能快速更新任務狀態
2. **及時記錄**：每日填寫日報和上傳照片，保持記錄完整
3. **團隊溝通**：積極使用討論區，保持團隊溝通暢通
4. **進度透明**：及時更新任務進度，讓團隊了解進展

### DON'Ts ❌

1. **不要期待完整管理功能**：複雜管理操作需切換到組織上下文
2. **不要忽視權限限制**：團隊上下文有意設計為簡化版
3. **不要繞過流程**：問題創建等功能需在組織上下文完成
4. **不要過度複雜化**：保持團隊上下文的簡潔性

---

## 🔗 相關資源

### 主要文檔
- [工作區上下文使用與規劃指南](./工作區上下文使用與規劃指南.md) - 完整系統說明
- [個人上下文菜單功能說明](./個人上下文菜單功能說明-user-data.md) - 個人上下文功能
- [組織上下文菜單功能說明](./組織上下文菜單功能說明-organization-data.md) - 組織上下文功能

### 數據文件
- [team-data.json](../src/assets/tmp/team-data.json) - 團隊上下文菜單數據

### 技術文檔
- [工作區上下文系統架構審查](./工作區上下文系統架構審查.md) - 技術架構
- [工作區系統快速參考指南](./工作區系統-快速參考指南.md) - 開發者參考

---

**文檔維護者**：開發團隊  
**最後更新**：2025-11-20  
**版本**：v1.0
