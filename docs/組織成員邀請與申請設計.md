# 組織成員邀請與申請設計

本文件歸納組織成員管理的核心設計原則與最佳實踐，適用於現代SaaS、企業協作平台、B2B管理系統：

---

## 1. 組織邀請用戶加入的標準設計

### 【情境與流程】
- 組織管理員（或具邀請權限者）透過管理介面發送邀請（Email為主）給現有或新用戶。
- 系統產生唯一邀請（token），受邀者登入/註冊後可檢視邀請並選擇「接受/拒絕」。
- 接受後自動成為組織成員（預設角色/分組），否則邀請紀錄失效。
- 支援邀請效期、撤回、重發等。

### 【權限控制】
- 招募/管理功能僅限授權管理員。
- 受邀者尚未接受前不能存取組織資源。

### 【資料結構建議】
- `organization`：組織基本資訊
- `user`：用戶
- `organization_invitation`：邀請紀錄（受邀人、狀態、建立日期、token等）
- `organization_member`：正式成員關聯表

---

## 2. 用戶主動申請加入組織

### 【情境與流程】
- 用戶於組織公開資訊頁申請加入，系統建立申請單並通知管理員。
- 管理員審核後同意即成為成員（可指定角色），拒絕則申請標註為失敗，提供訊息反饋。
- 限制重複申請，處理等待、黑名單或自動審核。

### 【資料結構建議】
- `organization_join_application`：申請記錄表（user_id, org_id, status, 審核意見等）

---

## 3. 團隊功能成員權限設計討論

- 除公開資訊外，所有團隊/組織協作功能（專案、任務、討論、檔案等）預設僅開放有成員關聯的用戶存取。
- 權限細分依角色（如Admin, Editor, Viewer）、子團隊、專案層級等設計。
- 關鍵API須於middleware/guard/RLS檢查身分。
- 嚴謹協作平台以邀請/審核為主，開放團隊型另行處理。

---

## 通用最佳化規則

- 職責明確分離：邀請單、申請單、成員、組織、用戶獨立資料表設計。
- 支援用戶一人多組織、多角色狀態。
- 明確定義狀態：邀請（待接受、過期、撤回）、申請（審核中、已通過、已拒絕）、成員（啟用、停權）。
- 權限驗證全覆蓋核心模組路徑，並有完整狀態追蹤與提示/通知。

