# 文檔更新日誌

> 📋 **目的**：記錄所有文檔的重大更新，確保文檔與實際架構保持一致

**最後更新**：2025-11-15  
**維護者**：開發團隊

---

## [2025-11-15] - 文檔一致性更新 v2.0

### 📋 更新概述

本次更新旨在確保所有文檔與核心架構文檔（PRD.md、27-完整架構流程圖.mermaid.md、28-架構審查報告.md、30-0-完整SQL表結構定義.md）保持一致，達到生產水平。

### ✅ 已更新文檔

#### 核心文檔
- ✅ **README.md** - 新增技術棧版本資訊、核心架構要點、Git-like 分支模型說明
- ✅ **00-開發作業指引.md** - 更新技術棧版本、完善架構理解、對齊 Angular 20.3.x 最佳實踐
- ✅ **01-專案結構說明.md** - 新增技術棧版本和架構說明
- ✅ **34-資料模型對照表.md** - 對齊 30-0-完整SQL表結構定義.md 的 51 張資料表結構定義

#### 資料文檔
- ✅ **30-資料表清單總覽.md** - 已包含 51 張資料表清單（無需更新）
- ✅ **30-0-完整SQL表結構定義.md** - 完整 SQL 表結構定義（核心參考文檔，無需更新）

#### 架構文檔
- ✅ **27-完整架構流程圖.mermaid.md** - 完整架構流程圖（Git-like 分支模型）（核心參考文檔，無需更新）
- ✅ **28-架構審查報告.md** - 架構審查報告（生產就緒版）（核心參考文檔，無需更新）

### 🔄 主要更新內容

#### 1. 技術棧版本統一
- 更新為 **Angular 20.3.x + NG-ZORRO 20.2.x + NG-ALAIN 20.1.x + Supabase**
- 所有文檔中的技術棧描述已統一

#### 2. 架構描述一致性
- 所有文檔中的架構描述已對齊 Git-like 分支模型
- 資料表數量統一為 **51 張**，分為 **11 個模組**
- 核心設計原則已統一（暫存區 48h、待辦中心五狀態、問題同步、活動記錄、文件管理）

#### 3. 資料模型對照更新
- **accounts 表**：更新為統一身份抽象結構（User/Bot/Organization）
- **teams 表**：移除不存在的欄位（slug、privacy、parent_team_id）
- **team_members 表**：使用 `account_id` 而非 `user_id`
- **organizations 表**：改為使用 `accounts` 表（type = 'Organization'）
- **blueprints 表**：對齊 30-0-完整SQL表結構定義.md 的實際欄位定義

#### 4. 狀態定義更新（43-狀態枚舉值定義.md）
- **任務狀態**：新增 `staging`、`in_qa`、`in_inspection` 狀態，反映暫存區和驗收流程
- **藍圖狀態**：使用 `on_hold` 而非 `paused`
- **問題狀態**：使用 `open` 而非 `new`，新增 `wont_fix` 狀態
- **品質驗收狀態**：區分品質檢查狀態和驗收狀態，新增 `conditional_pass` 和 `conditional_accept`
- **通知狀態**：改為使用布林值 `is_read` 而非枚舉
- **待辦中心**：新增五種狀態分類說明（待執行/暫存中/品管中/驗收中/問題追蹤）

#### 5. 詞彙表更新（42-詞彙表.md）
- 新增 Git-like 分支模型術語（主分支、組織分支、PR、承攬欄位、Fork 等）
- 更新任務狀態定義（新增暫存中、品管中、驗收中）
- 更新專案狀態定義（使用 `on_hold` 而非 `paused`）

#### 6. Angular 20.3.x 最佳實踐
- 更新為使用 `input()`, `output()`, `viewChild()`, `contentChild()` 替代舊裝飾器
- 強調使用 `inject()` 進行依賴注入
- 現代控制流程語法（`@if`、`@for`、`@switch`、`@defer`）
- Signals 狀態管理（`signal()`, `computed()`, `effect()`）

### 📝 待更新文檔（後續批次）

#### 架構流程圖文檔（10-29號）
- ✅ **10-系統架構思維導圖.mermaid.md** - 已包含 Git-like 分支模型（無需更新）
- ✅ **11-Supabase架構流程圖.mermaid.md** - 架構完整（無需更新）
- ✅ **12-實體關係圖.mermaid.md** - ER 圖完整（無需更新）
- ✅ **13-帳戶層流程圖.mermaid.md** - 已包含 Git-like 分支模型（無需更新）
- ✅ **14-業務流程圖.mermaid.md** - 流程完整（無需更新）
- ✅ **15-序列圖.mermaid.md** - 流程完整（無需更新）
- ✅ **16-狀態圖.mermaid.md** - 全面對齊 30-0-完整SQL表結構定義.md 的狀態定義
- ✅ **17-系統上下文圖.mermaid.md** - 新增架構說明和技術棧版本
- ✅ **18-容器圖.mermaid.md** - 更新技術棧版本和資料表數量
- ✅ **19-元件模組視圖.mermaid.md** - 新增技術棧版本註釋
- ✅ **20-部署基礎設施視圖.mermaid.md** - 更新技術棧版本
- ✅ **21-安全與-RLS-權限矩陣.md** - 新增架構說明和技術棧版本
- ✅ **22-資料生命週期-ETL-流程圖.mermaid.md** - 流程完整（無需更新）
- ✅ **23-可觀測性與CI-CD管道圖.mermaid.md** - 流程完整（無需更新）
- ✅ **24-領域事件時間軸圖.mermaid.md** - 流程完整（無需更新）
- ✅ **25-API-介面映射圖.mermaid.md** - 更新技術棧版本
- ✅ **26-Storage-Bucket結構視圖.mermaid.md** - 結構完整（無需更新）
- ✅ **27-完整架構流程圖.mermaid.md** - 完整架構流程圖（Git-like 分支模型）（核心參考文檔，已重新編號）
- ✅ **28-架構審查報告.md** - 架構審查報告（生產就緒版）（核心參考文檔，已重新編號）

#### 開發指南文檔（31-45號）
- ✅ **31-開發前檢查清單.md** - 更新為 51 張資料表，對齊 30-0-完整SQL表結構定義.md
- ✅ **32-快速開始指南.md** - 新增系統架構說明、技術棧版本、Git-like 分支模型
- [ ] 33-API-接口詳細文檔.md
- ✅ **35-開發工作流程.md** - 新增架構相關工作流程、Git-like 分支模型開發流程、51 張資料表開發注意事項
- [ ] 36-常見問題-FAQ.md
- [ ] 37-錯誤處理指南.md
- [ ] 38-測試指南.md
- [ ] 39-部署指南.md
- [ ] 40-效能優化指南.md
- [ ] 41-安全檢查清單.md
- ✅ **42-詞彙表.md** - 新增 Git-like 分支模型術語、更新任務狀態和專案狀態定義
- ✅ **43-狀態枚舉值定義.md** - 全面對齊 30-0-完整SQL表結構定義.md 的狀態定義，新增暫存區、品管、驗收狀態
- [ ] 45-SHARED_IMPORTS-使用指南.md

#### 架構流程圖文檔（10-26號）
- ✅ **16-狀態圖.mermaid.md** - 全面對齊 30-0-完整SQL表結構定義.md 的狀態定義：
  - 任務狀態：新增 `staging`、`in_qa`、`in_inspection` 狀態，反映暫存區和驗收流程
  - 藍圖狀態：將 `paused` 改為 `on_hold`
  - 問題狀態：將 `new` 改為 `open`，新增 `wont_fix` 狀態
  - 品質驗收狀態：區分品質檢查狀態機和驗收狀態機，新增 `conditional_pass` 和 `conditional_accept`
  - 通知狀態：改為使用布林值 `is_read` 而非枚舉
- ✅ **17-系統上下文圖.mermaid.md** - 新增 Git-like 分支模型、51 張資料表架構說明，更新技術棧版本
- ✅ **18-容器圖.mermaid.md** - 更新技術棧版本為 Angular 20.3.x + NG-ZORRO 20.2.x + NG-ALAIN 20.1.x，資料表數量更新為 51 張
- ✅ **19-元件模組視圖.mermaid.md** - 新增技術棧版本和架構說明註釋
- ✅ **20-部署基礎設施視圖.mermaid.md** - 更新技術棧版本為 Angular 20.3.x + NG-ZORRO 20.2.x + NG-ALAIN 20.1.x
- ✅ **21-安全與-RLS-權限矩陣.md** - 新增系統架構說明、Git-like 分支模型、51 張資料表說明，更新技術棧版本
- ✅ **25-API-介面映射圖.mermaid.md** - 更新技術棧版本為 Angular 20.3.x + NG-ZORRO 20.2.x + NG-ALAIN 20.1.x
- ✅ **13-帳戶層流程圖.mermaid.md** - 已包含 Git-like 分支模型（無需更新）
- ✅ **14-業務流程圖.mermaid.md** - 流程完整（無需更新）
- ✅ **15-序列圖.mermaid.md** - 流程完整（無需更新）
- ✅ **22-資料生命週期-ETL-流程圖.mermaid.md** - 流程完整（無需更新）
- ✅ **23-可觀測性與CI-CD管道圖.mermaid.md** - 流程完整（無需更新）
- ✅ **24-領域事件時間軸圖.mermaid.md** - 流程完整（無需更新）
- ✅ **26-Storage-Bucket結構視圖.mermaid.md** - 結構完整（無需更新）

#### 其他文檔
- [ ] 02-專案結構樹.md
- [ ] 03-專案結構流程圖.mermaid.md
- [ ] 04-重構後結構樹.md
- [ ] fyi.md

### 🎯 更新原則

1. **單一真實來源**：每個主題應有一個主要文檔作為真實來源
2. **交叉引用**：相關文檔應互相引用，避免重複定義
3. **版本控制**：重大變更應記錄在 CHANGELOG.md 中
4. **定期審查**：建議每月審查一次文檔一致性

### 📊 更新統計

- **已更新文檔數**：16 個
  - 核心文檔：4 個（README.md、00-開發作業指引.md、01-專案結構說明.md、34-資料模型對照表.md）
  - 開發指南：5 個（31-開發前檢查清單.md、32-快速開始指南.md、35-開發工作流程.md、42-詞彙表.md、43-狀態枚舉值定義.md）
  - 架構流程圖：9 個（16-狀態圖.mermaid.md、17-系統上下文圖.mermaid.md、18-容器圖.mermaid.md、19-元件模組視圖.mermaid.md、20-部署基礎設施視圖.mermaid.md、21-安全與-RLS-權限矩陣.md、25-API-介面映射圖.mermaid.md、27-完整架構流程圖.mermaid.md、28-架構審查報告.md）
- **待更新文檔數**：24+ 個
- **核心參考文檔**：4 個（PRD.md、27-完整架構流程圖.mermaid.md、28-架構審查報告.md、30-0-完整SQL表結構定義.md）

---

## 更新記錄格式

### [2025-11-15] - 更新標題

#### 更新類型
- ✅ 已更新
- 🔄 進行中
- 📝 待更新

#### 更新內容
- 具體更新項目
- 更新原因
- 影響範圍

---

**最後更新**：2025-11-15  
**維護者**：開發團隊

