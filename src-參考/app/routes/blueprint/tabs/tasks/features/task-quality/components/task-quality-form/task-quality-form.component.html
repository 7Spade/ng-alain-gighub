<form nz-form [formGroup]="form" nzLayout="vertical" (ngSubmit)="submit()">
  <nz-form-item>
    <nz-form-label nzRequired>檢查項目</nz-form-label>
    <nz-form-control [nzErrorTip]="'請輸入檢查項目名稱'">
      <input nz-input formControlName="title" [disabled]="loading()" placeholder="請輸入檢查項目名稱..." />
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label nzRequired>描述</nz-form-label>
    <nz-form-control [nzErrorTip]="'請輸入檢查描述'">
      <textarea
        nz-input
        formControlName="description"
        [disabled]="loading()"
        [nzAutosize]="{ minRows: 4, maxRows: 8 }"
        placeholder="請詳細描述檢查內容..."
      ></textarea>
    </nz-form-control>
  </nz-form-item>

  <div nz-row [nzGutter]="16">
    <div nz-col nzXs="24" nzSm="8">
      <nz-form-item>
        <nz-form-label nzRequired>分類</nz-form-label>
        <nz-form-control>
          <nz-select formControlName="category" [disabled]="loading()">
            <nz-option [nzLabel]="'安全'" [nzValue]="'safety'"></nz-option>
            <nz-option [nzLabel]="'結構'" [nzValue]="'structure'"></nz-option>
            <nz-option [nzLabel]="'材料'" [nzValue]="'material'"></nz-option>
            <nz-option [nzLabel]="'工藝'" [nzValue]="'process'"></nz-option>
            <nz-option [nzLabel]="'文檔'" [nzValue]="'documentation'"></nz-option>
            <nz-option [nzLabel]="'其他'" [nzValue]="'other'"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col nzXs="24" nzSm="8">
      <nz-form-item>
        <nz-form-label nzRequired>狀態</nz-form-label>
        <nz-form-control>
          <nz-select formControlName="status" [disabled]="loading()">
            <nz-option [nzLabel]="'待檢查'" [nzValue]="'pending'"></nz-option>
            <nz-option [nzLabel]="'檢查中'" [nzValue]="'in-progress'"></nz-option>
            <nz-option [nzLabel]="'通過'" [nzValue]="'passed'"></nz-option>
            <nz-option [nzLabel]="'未通過'" [nzValue]="'failed'"></nz-option>
            <nz-option [nzLabel]="'需改進'" [nzValue]="'needs-improvement'"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col nzXs="24" nzSm="8">
      <nz-form-item>
        <nz-form-label>評分（0-100）</nz-form-label>
        <nz-form-control>
          <nz-input-number
            formControlName="score"
            [disabled]="loading()"
            [nzMin]="0"
            [nzMax]="100"
            style="width: 100%"
          ></nz-input-number>
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>

  <div nz-row [nzGutter]="16">
    <div nz-col nzXs="24" nzSm="12">
      <nz-form-item>
        <nz-form-label>檢查員</nz-form-label>
        <nz-form-control>
          <nz-select
            formControlName="inspector_id"
            nzAllowClear
            nzPlaceHolder="選擇檢查員"
            [disabled]="loading()"
            [nzOptions]="memberOptions()"
          ></nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col nzXs="24" nzSm="12">
      <nz-form-item>
        <nz-form-label>檢查日期</nz-form-label>
        <nz-form-control>
          <nz-date-picker formControlName="check_date" style="width: 100%" [disabled]="loading()"></nz-date-picker>
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>

  <div nz-row [nzGutter]="16">
    <div nz-col nzXs="24" nzSm="12">
      <nz-form-item>
        <nz-form-label>下次檢查日期</nz-form-label>
        <nz-form-control>
          <nz-date-picker formControlName="next_check_date" style="width: 100%" [disabled]="loading()"></nz-date-picker>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col nzXs="24" nzSm="12">
      <nz-form-item>
        <nz-form-label>備註</nz-form-label>
        <nz-form-control>
          <textarea
            nz-input
            formControlName="notes"
            [disabled]="loading()"
            [nzAutosize]="{ minRows: 3, maxRows: 6 }"
            placeholder="檢查備註..."
          ></textarea>
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>

  <div nz-row nzJustify="end" nzGutter="8">
    <div nz-col>
      <button nz-button type="button" (click)="cancel()" [disabled]="loading()">取消</button>
    </div>
    <div nz-col>
      <button nz-button nzType="primary" [nzLoading]="loading()" type="submit">
        {{ editingQuality() ? '更新品質檢查' : '建立品質檢查' }}
      </button>
    </div>
  </div>
</form>
