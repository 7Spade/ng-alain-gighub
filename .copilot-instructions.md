# GitHub Copilot é–‹ç™¼æŒ‡å¼•

> æœ¬æª”æ¡ˆç‚º VSCode GitHub Copilot çš„ä¸»è¦æŒ‡å¼•æ–‡ä»¶ï¼Œå®šç¾©å°ˆæ¡ˆçš„é–‹ç™¼æ¨™æº–ã€æ¶æ§‹åŸå‰‡å’Œå·¥ä½œæµç¨‹ã€‚

## ğŸ¯ å°ˆæ¡ˆæ¦‚è¿°

**ng-alain-github** æ˜¯ä¸€å€‹ä¼æ¥­ç´šä»»å‹™å”ä½œèˆ‡å¯©æŸ¥ç³»çµ±ï¼Œæ¡ç”¨ï¼š
- **å‰ç«¯**ï¼šAngular 20 + ng-alain + NG-ZORROï¼ˆStandalone + Signals + OnPushï¼‰
- **å¾Œç«¯**ï¼šSupabaseï¼ˆAuth / Postgres / Storage / Edge Functionsï¼‰
- **æ¶æ§‹**ï¼šGit-like Branch æ¨¡å‹ï¼Œ51 å¼µè³‡æ–™è¡¨ï¼Œ48h staging å¯å›é€€æ©Ÿåˆ¶

## ğŸ“ æ ¸å¿ƒé–‹ç™¼åŸå‰‡

### 1. å¸¸è¦‹åšæ³• (Common Practice)
- éµå¾ª Angular å®˜æ–¹æ–‡ä»¶å’Œ ng-alain æœ€ä½³å¯¦è¸
- åƒè€ƒ `docs/` ç›®éŒ„ä¸­çš„å°ˆæ¡ˆæ–‡ä»¶ï¼Œè€Œéå¤–éƒ¨ä¾†æº
- ä¿æŒç¨‹å¼ç¢¼é¢¨æ ¼èˆ‡ç¾æœ‰ç¨‹å¼ç¢¼ä¸€è‡´

### 2. ä¼æ¥­æ¨™æº– (Enterprise Standard)
- **åˆ†å±¤æ¶æ§‹**ï¼š`routes â†’ shared â†’ core`ï¼Œåš´æ ¼éµå®ˆä¾è³´æ–¹å‘
- **æ¨¡çµ„åŒ–**ï¼šä½¿ç”¨ `SHARED_IMPORTS` çµ±ä¸€åŒ¯å…¥å…±ç”¨å…ƒä»¶
- **ç‹€æ…‹ç®¡ç†**ï¼šæ‰€æœ‰æœå‹™å’Œå…ƒä»¶ç‹€æ…‹ä½¿ç”¨ Signals API
- **å‹åˆ¥å®‰å…¨**ï¼šå•Ÿç”¨ TypeScript strict æ¨¡å¼ï¼Œç¦æ­¢ä½¿ç”¨ `any`

### 3. ç¬¦åˆé‚è¼¯ (Logical Consistency)
- è³‡æ–™æµæ¸…æ™°ï¼šå–®å‘è³‡æ–™æµï¼Œé¿å…å¾ªç’°ä¾è³´
- å‘½åèªæ„åŒ–ï¼šè®Šæ•¸ã€å‡½å¼ã€å…ƒä»¶åç¨±éœ€æ˜ç¢ºè¡¨é”ç”¨é€”
- æ¢ä»¶ç°¡æ½”ï¼šé¿å…è¤‡é›œçš„å·¢ç‹€æ¢ä»¶ï¼Œä½¿ç”¨ early return

### 4. ç¬¦åˆå¸¸ç† (Practical Reasoning)
- åŠŸèƒ½å¯ç”¨ï¼šå„ªå…ˆç¢ºä¿åŠŸèƒ½æ­£å¸¸é‹ä½œ
- ç”¨æˆ¶é«”é©—ï¼šè€ƒæ…®å¯¦éš›ä½¿ç”¨å ´æ™¯å’Œæ•ˆèƒ½
- åŠæ™‚é©—è­‰ï¼šæ¯æ¬¡è®Šæ›´å¾ŒåŸ·è¡Œæ¸¬è©¦å’Œå»ºç½®
- æ–‡ä»¶åŒæ­¥ï¼šç¨‹å¼ç¢¼è®Šæ›´éœ€åŒæ­¥æ›´æ–°ç›¸é—œæ–‡ä»¶

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

### Angular å…ƒä»¶è¦ç¯„
```typescript
// âœ… æ­£ç¢ºï¼šStandalone + SHARED_IMPORTS + Signals
import { Component, ChangeDetectionStrategy, signal, input, output } from '@angular/core';
import { SHARED_IMPORTS } from '@shared';

@Component({
  selector: 'app-example',
  standalone: true,
  imports: [SHARED_IMPORTS],
  templateUrl: './example.component.html',
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class ExampleComponent {
  // Signal inputs (Angular 17.3+)
  readonly title = input.required<string>();
  readonly count = input<number>(0);
  
  // Signal outputs
  readonly itemClicked = output<string>();
  
  // Signal state
  readonly isLoading = signal(false);
  readonly items = signal<Item[]>([]);
}
```

### æ¨¡æ¿ç¾ä»£åŒ–èªæ³•
```html
<!-- âœ… ä½¿ç”¨ @if/@for/@switch/@defer -->
@if (isLoading()) {
  <nz-spin />
} @else {
  @for (item of items(); track item.id) {
    <div>{{ item.name }}</div>
  }
}

<!-- âŒ é¿å…èˆŠèªæ³• -->
<div *ngIf="isLoading">...</div>
<div *ngFor="let item of items">...</div>
```

### æœå‹™è¦ç¯„
```typescript
// âœ… æ­£ç¢ºï¼šä½¿ç”¨ Signals å’Œæ˜ç¢ºå‹åˆ¥
import { Injectable, signal, computed } from '@angular/core';
import { toSignal } from '@angular/core/rxjs-interop';

@Injectable({ providedIn: 'root' })
export class DataService {
  private readonly dataSignal = signal<Data[]>([]);
  readonly data = this.dataSignal.asReadonly();
  
  readonly filteredData = computed(() => 
    this.data().filter(item => item.active)
  );
  
  async loadData(): Promise<void> {
    const result = await this.fetchData();
    this.dataSignal.set(result);
  }
}
```

## ğŸ”’ å®‰å…¨èˆ‡è³‡æ–™è¦ç¯„

### Supabase æ•´åˆ
- **èªè­‰**ï¼šä½¿ç”¨ `@delon/auth` çš„ `TokenService` ç®¡ç† JWT
- **RLS**ï¼šæ‰€æœ‰è³‡æ–™å­˜å–å¿…é ˆéµå®ˆ Row Level Security æ”¿ç­–
- **å‹åˆ¥**ï¼šä½¿ç”¨ `docs/30-0-å®Œæ•´SQLè¡¨çµæ§‹å®šç¾©.md` ä¸­å®šç¾©çš„è³‡æ–™æ¨¡å‹

### è·¯å¾‘åˆ¥å
```typescript
// âœ… åƒ…ä½¿ç”¨æ ¹å±¤ç´šåˆ¥å
import { AuthService } from '@core';
import { SHARED_IMPORTS } from '@shared';
import { environment } from '@env';

// âŒ ç¦æ­¢æ·±å±¤åˆ¥å
import { AuthService } from '@core/services/auth';
```

## ğŸ”„ é–‹ç™¼å·¥ä½œæµç¨‹

### 1. é–‹å§‹å‰
```bash
# å–å¾—æœ€æ–°ç¨‹å¼ç¢¼
git pull origin main

# æª¢æŸ¥ç’°å¢ƒ
node --version    # æ‡‰ç‚º 20.19.5
yarn --version    # æ‡‰ç‚º 4.9.2
```

### 2. é–‹ç™¼ä¸­
```bash
# å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
yarn start

# ç›£è½å‹åˆ¥æª¢æŸ¥
yarn type-check --watch

# ç›£è½æ¸¬è©¦
yarn test
```

### 3. æäº¤å‰ï¼ˆå¿…é ˆå…¨éƒ¨é€šéï¼‰
```bash
yarn lint                  # ESLint æª¢æŸ¥
yarn lint:style           # Stylelint æª¢æŸ¥
yarn type-check           # TypeScript å‹åˆ¥æª¢æŸ¥
yarn test --watch=false   # å–®å…ƒæ¸¬è©¦
yarn build                # å»ºç½®æª¢æŸ¥
```

## ğŸ“š æ–‡ä»¶åƒè€ƒ

### æ ¸å¿ƒæ–‡ä»¶
- `docs/00-é–‹ç™¼ä½œæ¥­æŒ‡å¼•.md` - é–‹ç™¼è¦ç¯„èˆ‡æµç¨‹
- `docs/27-å®Œæ•´æ¶æ§‹æµç¨‹åœ–.mermaid.md` - Git-like åˆ†æ”¯æ¨¡å‹æ¶æ§‹åœ–
- `docs/30-0-å®Œæ•´SQLè¡¨çµæ§‹å®šç¾©.md` - å®Œæ•´è³‡æ–™è¡¨å®šç¾©ï¼ˆ51 å¼µè¡¨ï¼‰
- `docs/45-SHARED_IMPORTS-ä½¿ç”¨æŒ‡å—.md` - SHARED_IMPORTS ä½¿ç”¨è¦ç¯„

### Agent æ–‡ä»¶
- `.github/agents/ng-project-agent.md` - å°ˆæ¡ˆé¡˜æ™¯ã€æ¶æ§‹ã€è³‡æ–™èˆ‡ API æ‘˜è¦
- `.github/agents/role.agent.md` - AI è§’è‰²å®šä½èˆ‡å›è¦†åŸå‰‡
- `.github/agents/domain/*.md` - å„é ˜åŸŸå°ˆå®¶æª¢æŸ¥è¡¨

### Cursor è¦å‰‡
- `.cursor/rules/angular.mdc` - Angular é–‹ç™¼è¦ç¯„
- `.cursor/rules/typescript.mdc` - TypeScript å‹åˆ¥å®‰å…¨è¦ç¯„
- `.cursor/rules/code-quality.mdc` - ç¨‹å¼ç¢¼å“è³ªè¦ç¯„

## ğŸš« ç¦æ­¢äº‹é …

1. **ä¸ä½¿ç”¨ NgModule**ï¼šå°ˆæ¡ˆå·²å…¨é¢ Standalone
2. **ä¸ä½¿ç”¨ `any` å‹åˆ¥**ï¼šå¿…é ˆæ˜ç¢ºå‹åˆ¥
3. **ä¸ä½¿ç”¨ `@Input()/@Output()` è£é£¾å™¨**ï¼šæ”¹ç”¨ Signal APIs
4. **ä¸ä½¿ç”¨ `*ngIf/*ngFor` èªæ³•**ï¼šæ”¹ç”¨ `@if/@for`
5. **ä¸ç›´æ¥æ“ä½œ DOM**ï¼šä½¿ç”¨ Angular APIs
6. **ä¸ç¡¬ç·¨ç¢¼æ©Ÿå¯†è³‡è¨Š**ï¼šä½¿ç”¨ç’°å¢ƒè®Šæ•¸
7. **ä¸è·³éæ¸¬è©¦**ï¼šæ‰€æœ‰è®Šæ›´éœ€æœ‰å°æ‡‰æ¸¬è©¦

## âœ… å›è¦†æ ¼å¼

ç•¶å›ç­”å•é¡Œæˆ–æä¾›ç¨‹å¼ç¢¼æ™‚ï¼Œè«‹éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š

### 1. çµè«– (1-2 å¥)
```
æ ¹æ“š `docs/xx-xxx.md` çš„è¦ç¯„ï¼Œæ‡‰è©²ä½¿ç”¨ Signal inputs è€Œé @Input() è£é£¾å™¨ã€‚
```

### 2. å¯¦ä½œæ­¥é©Ÿæˆ–ç¨‹å¼ç¢¼
```typescript
// å…·é«”çš„å¯¦ä½œç¯„ä¾‹ï¼ŒåŒ…å«æª”æ¡ˆè·¯å¾‘
// src/app/routes/example/example.component.ts
readonly title = input.required<string>();
```

### 3. é¢¨éšªèˆ‡æ¸¬è©¦
```bash
# é©—è­‰æŒ‡ä»¤
yarn lint
yarn type-check
yarn test --watch=false

# é æœŸçµæœï¼šæ‰€æœ‰æª¢æŸ¥é€šé
# é¢¨éšªï¼šç„¡å‘ä¸‹ç›¸å®¹å•é¡Œ
```

### 4. äººå·¥æª¢æŸ¥äº‹é …
```
- éœ€æ‰‹å‹•æ¸¬è©¦ä½¿ç”¨è€…ç™»å…¥æµç¨‹
- éœ€ç¢ºèª RLS æ”¿ç­–æ˜¯å¦æ­£ç¢ºå¥—ç”¨
```

## ğŸ” å•é¡Œæ’æŸ¥

### å¸¸è¦‹å•é¡Œ
1. **å‹åˆ¥éŒ¯èª¤**ï¼šæª¢æŸ¥ `docs/30-0-å®Œæ•´SQLè¡¨çµæ§‹å®šç¾©.md` ç¢ºèªè³‡æ–™æ¨¡å‹
2. **åŒ¯å…¥éŒ¯èª¤**ï¼šç¢ºèªä½¿ç”¨ `@core`ã€`@shared` ç­‰è·¯å¾‘åˆ¥å
3. **å»ºç½®å¤±æ•—**ï¼šåŸ·è¡Œ `yarn type-check` æ‰¾å‡ºå‹åˆ¥å•é¡Œ
4. **æ¸¬è©¦å¤±æ•—**ï¼šç¢ºèªæ¨¡æ“¬ (mock) è³‡æ–™èˆ‡çœŸå¯¦è³‡æ–™çµæ§‹ä¸€è‡´

### éœ€è¦å”åŠ©æ™‚
- å…ˆæª¢æŸ¥ `docs-index.md` æ‰¾åˆ°å°æ‡‰æ–‡ä»¶
- åƒè€ƒ `.github/agents/domain/*.md` çš„æª¢æŸ¥æ¸…å–®
- æŸ¥çœ‹ `.cursor/rules/*.mdc` çš„è©³ç´°è¦ç¯„

---

**ç‰ˆæœ¬**ï¼šv2.0  
**æœ€å¾Œæ›´æ–°**ï¼š2025-11-18  
**ç¶­è­·è€…**ï¼šé–‹ç™¼åœ˜éšŠ
