# æ•¸æ“šåº«æ¦‚è¦½

> **ç›®çš„**ï¼šç‚º AI æä¾›æ•¸æ“šåº«æ¶æ§‹çš„å¿«é€Ÿåƒè€ƒï¼Œå¹«åŠ©ç†è§£æ•¸æ“šåº«çµæ§‹å’Œé—œéµè¡¨é—œä¿‚ã€‚

## ğŸ“Š æ•¸æ“šåº«æ¶æ§‹ç¸½è¦½

ç³»çµ±å…±åŒ…å« **51 å¼µè³‡æ–™è¡¨**ï¼Œåˆ†ç‚º 11 å€‹æ¨¡çµ„ã€‚æ‰€æœ‰è¡¨éƒ½ä½¿ç”¨ Supabase PostgreSQLï¼Œä¸¦å•Ÿç”¨ RLS (Row Level Security) è¡Œç´šå®‰å…¨ã€‚

## ğŸ—‚ï¸ æ¨¡çµ„åˆ†é¡

### ğŸ” å¸³æˆ¶èˆ‡èº«ä»½ç³»çµ± (4 å¼µ)

- **accounts** - å¸³æˆ¶ä¸»è¡¨ï¼ˆçµ±ä¸€èº«ä»½æŠ½è±¡ï¼Œæ”¯æ´ User/Bot/Organizationï¼‰
- **teams** - åœ˜éšŠè¡¨
- **team_members** - åœ˜éšŠæˆå“¡è¡¨
- **organization_schedules** - çµ„ç¹”æ’ç­è¡¨ï¼ˆè·¨è—åœ–æˆå“¡èª¿æ´¾ï¼‰

### ğŸ¤ çµ„ç¹”å”ä½œç³»çµ± (3 å¼µ)

- **organization_collaborations** - çµ„ç¹”å”ä½œé—œä¿‚è¡¨ï¼ˆ1:1 æ‰¿æ”¬é—œä¿‚ï¼‰
- **collaboration_invitations** - å”ä½œé‚€è«‹è¡¨
- **collaboration_members** - å”ä½œæˆå“¡è¡¨

### ğŸ”’ æ¬Šé™ç³»çµ± (5 å¼µ)

- **roles** - è§’è‰²å®šç¾©è¡¨
- **user_roles** - ç”¨æˆ¶è§’è‰²é—œè¯è¡¨
- **permissions** - æ¬Šé™å®šç¾©è¡¨
- **role_permissions** - è§’è‰²æ¬Šé™é—œè¯è¡¨
- **branch_permissions** - åˆ†æ”¯æ¬Šé™è¡¨ï¼ˆåˆ†æ”¯å±¤ç´šæ¬Šé™æ§åˆ¶ï¼‰

### ğŸ¯ è—åœ–/å°ˆæ¡ˆç³»çµ± (5 å¼µ) - Git-like åˆ†æ”¯æ¨¡å‹

- **blueprints** - è—åœ–ä¸»è¡¨ï¼ˆä¸»åˆ†æ”¯ï¼Œæ“æœ‰è€…çµ„ç¹”æ§åˆ¶ä»»å‹™çµæ§‹ï¼‰
- **blueprint_configs** - è—åœ–é…ç½®è¡¨
- **blueprint_branches** - è—åœ–åˆ†æ”¯è¡¨ï¼ˆçµ„ç¹”åˆ†æ”¯ï¼‰
- **branch_forks** - åˆ†æ”¯ Fork è¨˜éŒ„è¡¨
- **pull_requests** - PR è¡¨ï¼ˆåˆ†æ”¯åˆä½µè«‹æ±‚ï¼‰

### ğŸ“‹ ä»»å‹™åŸ·è¡Œç³»çµ± (9 å¼µ)

- **tasks** - ä»»å‹™ä¸»è¡¨ï¼ˆæ¨¹ç‹€çµæ§‹ï¼‰
- **task_assignments** - ä»»å‹™æŒ‡æ´¾è¡¨
- **task_lists** - å¾…è¾¦åˆ—è¡¨è¡¨
- **task_staging** - æš«å­˜å€è¡¨ï¼ˆ48h å¯æ’¤å›ï¼‰
- **daily_reports** - æ–½å·¥æ—¥èªŒè¡¨
- **report_photos** - æ–½å·¥æ—¥èªŒç…§ç‰‡è¡¨
- **weather_cache** - å¤©æ°£å¿«å–è¡¨
- **task_dependencies** - ä»»å‹™ä¾è³´è¡¨
- **task_templates** - ä»»å‹™æ¨¡æ¿è¡¨

### âœ… å“è³ªé©—æ”¶ç³»çµ± (4 å¼µ)

- **quality_checks** - å“ç®¡æª¢æŸ¥è¡¨
- **qc_photos** - å“ç®¡ç…§ç‰‡è¡¨
- **inspections** - é©—æ”¶è¡¨ï¼ˆè²¬ä»»åˆ‡å‰²ï¼‰
- **inspection_photos** - é©—æ”¶ç…§ç‰‡è¡¨

### âš ï¸ å•é¡Œè¿½è¹¤ç³»çµ± (4 å¼µ)

- **issues** - å•é¡Œä¸»è¡¨
- **issue_assignments** - å•é¡ŒæŒ‡æ´¾è¡¨
- **issue_photos** - å•é¡Œç…§ç‰‡è¡¨
- **issue_sync_logs** - å•é¡ŒåŒæ­¥æ—¥èªŒè¡¨ï¼ˆè·¨åˆ†æ”¯åŒæ­¥ï¼‰

### ğŸ’¬ å”ä½œæºé€šç³»çµ± (6 å¼µ)

- **comments** - ç•™è¨€è¡¨
- **notifications** - é€šçŸ¥è¡¨
- **notification_rules** - é€šçŸ¥è¦å‰‡è¡¨
- **notification_subscriptions** - é€šçŸ¥è¨‚é–±è¡¨
- **personal_todos** - å€‹äººå¾…è¾¦è¡¨
- **todo_status_tracking** - å¾…è¾¦ç‹€æ…‹è¿½è¹¤è¡¨

### ğŸ“Š è³‡æ–™åˆ†æç³»çµ± (6 å¼µ)

- **documents** - æ–‡ä»¶ä¸»è¡¨
- **document_versions** - æ–‡ä»¶ç‰ˆæœ¬è¡¨
- **document_thumbnails** - æ–‡ä»¶ç¸®åœ–è¡¨
- **progress_tracking** - é€²åº¦è¿½è¹¤è¡¨
- **activity_logs** - æ´»å‹•è¨˜éŒ„è¡¨
- **analytics_cache** - åˆ†æå¿«å–è¡¨

### ğŸ¤– æ©Ÿå™¨äººç³»çµ± (3 å¼µ)

- **bots** - Bot å®šç¾©è¡¨
- **bot_tasks** - Bot ä»»å‹™è¡¨
- **bot_execution_logs** - Bot åŸ·è¡Œæ—¥èªŒè¡¨

### âš™ï¸ ç³»çµ±ç®¡ç† (2 å¼µ)

- **settings** - ç³»çµ±è¨­å®šè¡¨
- **feature_flags** - åŠŸèƒ½é–‹é—œè¡¨

## ğŸ”— é—œéµé—œè¯é—œä¿‚

### è—åœ– â†’ åˆ†æ”¯ â†’ PR æµç¨‹

```
blueprints (ä¸»åˆ†æ”¯)
    â†“ 1:N
blueprint_branches (çµ„ç¹”åˆ†æ”¯)
    â†“ 1:N
pull_requests (æäº¤åŸ·è¡Œæ•¸æ“š)
    â†“ å¯©æ ¸é€šé
blueprints (æ›´æ–°æ‰¿æ”¬æ¬„ä½)
```

### ä»»å‹™åŸ·è¡Œæµç¨‹

```
tasks (ä»»å‹™æ¨¹)
    â†“
task_assignments (æŒ‡æ´¾)
    â†“
task_lists (å¾…è¾¦åˆ—è¡¨)
    â†“
task_staging (48h æš«å­˜)
    â†“
daily_reports (æ–½å·¥æ—¥èªŒ) + quality_checks (å“ç®¡)
    â†“
inspections (é©—æ”¶/è²¬ä»»åˆ‡å‰²)
    â†“
progress_tracking (é€²åº¦å„€è¡¨æ¿)
```

### å•é¡ŒåŒæ­¥æ©Ÿåˆ¶

```
issues (åˆ†æ”¯å•é¡Œ)
    â†“ å³æ™‚åŒæ­¥
issue_sync_logs
    â†“
blueprints (ä¸»åˆ†æ”¯çµ±ä¸€æŒæ§)
```

## ğŸ” å®‰å…¨æ©Ÿåˆ¶

- **RLS (Row Level Security)**ï¼šæ‰€æœ‰è¡¨éƒ½å•Ÿç”¨ RLS
- **æ¬Šé™é©—è­‰**ï¼šè³‡æ–™åº«å±¤ï¼ˆRLSï¼‰èˆ‡æ‡‰ç”¨å±¤é›™é‡é©—è­‰
- **åˆ†æ”¯æ¬Šé™**ï¼š`branch_permissions` è¡¨æ§åˆ¶åˆ†æ”¯å±¤ç´šæ¬Šé™

## ğŸ“š åƒè€ƒæ–‡æª”

- [è³‡æ–™è¡¨æ¸…å–®ç¸½è¦½](../../docs/30-è³‡æ–™è¡¨æ¸…å–®ç¸½è¦½.md)
- [å®Œæ•´ SQL è¡¨çµæ§‹å®šç¾©](../../docs/30-1-å®Œæ•´SQLè¡¨çµæ§‹å®šç¾©.md) â­â­â­â­â­
- [å¯¦é«”é—œä¿‚åœ–](../../docs/12-å¯¦é«”é—œä¿‚åœ–.mermaid.md)

---

**æœ€å¾Œæ›´æ–°**ï¼š2025-01-15

