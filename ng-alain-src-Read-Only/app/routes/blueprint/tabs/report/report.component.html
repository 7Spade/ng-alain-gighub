@if (loading()) {
  <nz-spin nzSimple [nzSize]="'large'" style="display: block; text-align: center; padding: 50px;"></nz-spin>
} @else if (blueprintIdValue(); as blueprintId) {
  <nz-card [nzBordered]="false" class="mb-lg">
    @if (blueprint(); as bp) {
      <div class="flex flex-wrap gap-lg align-center">
        <div>
          <h2 class="text-xl font-medium mb-xs">{{ bp.name }}</h2>
          <div class="text-muted">最新更新：{{ bp.updated_at | date: 'yyyy-MM-dd HH:mm' }}</div>
        </div>
        <div class="ml-auto flex gap-lg">
          <div class="text-center">
            <div class="text-lg text-primary">{{ bp.progress_percentage }}%</div>
            <div class="text-muted">專案進度</div>
          </div>
          <div class="text-center">
            <div class="text-lg text-primary">{{ members().length }}</div>
            <div class="text-muted">參與人員</div>
          </div>
        </div>
      </div>
    }
  </nz-card>

  <task-report-panel [blueprintId]="blueprintId" [members]="members()"></task-report-panel>
} @else {
  <nz-empty nzNotFoundContent="藍圖不存在或無存取權限"></nz-empty>
}