---
description: Code quality and best practices standards
globs: ["**/*.ts", "**/*.tsx", "**/*.html"]
alwaysApply: true
---

# Code Quality Standards

> **Related Rules**: See [Type Safety](./typescript.mdc), [Linting](./linting.mdc), [Code Formatting](./formatting.mdc), [Architecture Standards](./architecture.mdc)

## Post-Implementation Verification

- **All implementations must undergo complete verification to ensure no errors**
- After implementation, the following verification steps must be executed:
  1. **Type Check**: Run `yarn type-check` to ensure no type errors (see [Type Safety](./typescript.mdc))
  2. **Code Check**: Run `yarn lint` to ensure no ESLint errors (see [Linting](./linting.mdc))
  3. **Style Check**: Run `yarn lint:style` to ensure no Stylelint errors (see [Styling Standards](./styling.mdc))
  4. **Compilation Check**: Run `yarn build` to ensure project compiles successfully
  5. **Test Check**: Run relevant tests to ensure functionality works (see [Testing Standards](./testing.mdc))
  6. **Runtime Check**: Start development server to verify functionality works properly in browser
- Only after all checks pass can code be committed or task marked as complete
- If errors are found, they must be fixed immediately, cannot be skipped or postponed
- Major changes require more comprehensive checks, including integration tests of related modules

## No Reinventing the Wheel

- Before implementation, search the project for existing solutions
- Prioritize refactoring or extending existing features rather than building from scratch
- Check `SHARED_IMPORTS` and public modules, prioritize using existing tools (see [Shared Module Priority](./shared-imports.mdc))

## No Ad-hoc Fixes

- Prohibit using temporary workarounds, quick fixes, hacks, and other ad-hoc solutions
- Must adopt structured solutions, fully consider the root cause of problems
- Provide sustainable, maintainable solutions rather than just quick fixes

## Naming Convention Consistency

- Follow project's existing naming conventions (files, classes, functions, variables)
- Align routing rules and dependency import consistency
- Use clear naming, avoid abbreviations and ambiguity
- Keep module, service, and component naming patterns consistent

## Documentation

- Each module needs to provide README.md explaining responsibilities
- Complex logic needs JSDoc comments
- Architecture decisions recorded in AGENTS.md
- Database changes need to synchronize model definition updates (`docs/30-0-完整SQL表結構定義.md`)
- Architecture changes need to synchronize architecture document updates (`docs/27-完整架構流程圖.mermaid.md`, `docs/28-架構審查報告.md`)
- Regularly check consistency between documentation and code

## Early Detection of Inconsistencies

- Use Supabase MCP to regularly check database structure (see [MCP Tools](./mcp-tools.mdc))
- Use TypeScript strict mode to catch type errors (see [Type Safety](./typescript.mdc))
- Use ESLint and Stylelint for code checking (see [Linting](./linting.mdc), [Styling Standards](./styling.mdc))
